{"version":3,"file":"voicenter-events-sdk.umd.js","sources":["../src/eventTypes.js","../src/utils/environments.js","../src/config.js","../src/Logger.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_trimmedEndIndex.js","../node_modules/lodash/_baseTrim.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../src/store/handleStoreEvents.js","../src/utils/statusTypes.js","../src/store/extensions.js","../src/store/queues.js","../src/store/dialers.js","../src/utils.js","../src/utils/externalLogin.js","../src/utils/loadExternalScript.js","../node_modules/js-md5/src/md5.js","../src/sdk.js","../src/index.js"],"sourcesContent":["export default {\r\n  LOGIN_STATUS: 'loginStatus',\r\n  LOGIN: 'login',\r\n  LOGIN_USER: 'loginUser',\r\n  LOGIN_CODE: 'loginUserCode',\r\n  LOGIN_ACCOUNT: 'loginAccount',\r\n  LOGIN_RESPONSE: 'loginResponse',\r\n  QUEUE_EVENT: 'QueueEvent',\r\n  QUEUES_UPDATED: 'QueuesUpdated',\r\n  DIALERS_UPDATED: 'DialersUpdated',\r\n  EXTENSION_EVENT: 'ExtensionEvent',\r\n  EXTENSION_UPDATED: 'ExtensionsUpdated',\r\n  ALL_EXTENSION_STATUS: 'AllExtensionsStatus',\r\n  CONNECT: 'connect',\r\n  CONNECT_ERROR: 'connect_error',\r\n  CONNECT_TIMEOUT: 'connect_timeout',\r\n  DISCONNECT: 'disconnect',\r\n  PONG: 'pong',\r\n  RECONNECT: 'reconnect',\r\n  RECONNECT_ATTEMPT: 'reconnect_attempt',\r\n  RESYNC: 'resync',\r\n  RECONNECTING: 'reconnecting',\r\n  RECONNECT_ERROR: 'reconnect_error',\r\n  RECONNECT_FAILED: 'reconnect_failed',\r\n  KEEP_ALIVE: 'keepalive',\r\n  KEEP_ALIVE_RESPONSE: 'keepaliveResponse',\r\n  CLOSE: 'closeme',\r\n  ERROR: 'error',\r\n  ALL_DIALERS_STATUS: 'AllDialersStatus',\r\n  DIALER_EVENT: 'DialerEvent'\r\n}\r\n","export default {\r\n  BROWSER: 'browser',\r\n  CHROME_EXTENSION: 'chrome-extension'\r\n}\r\n","export const defaultServers = [{\r\n  'URLID': 59,\r\n  'Priority': 5,\r\n  'Version': 2,\r\n  'Domain': 'monitor1.voicenter.co'\r\n}, {\r\n  'URLID': 3,\r\n  'Priority': 4,\r\n  'Version': 2,\r\n  'Domain': 'monitor3.voicenter.co.il'\r\n}, {\r\n  'URLID': 4,\r\n  'Priority': 3,\r\n  'Version': 2,\r\n  'Domain': 'monitor4.voicenter.co.il'\r\n}, {\r\n  'URLID': 11,\r\n  'Priority': 2,\r\n  'Version': 2,\r\n  'Domain': 'monitor11.voicenter.co'\r\n}, {\r\n  'URLID': 5,\r\n  'Priority': 0,\r\n  'Version': 2,\r\n  'Domain': 'monitor5.voicenter.co.il'\r\n}];\r\n","\r\nclass Logger {\r\n  constructor(options = {}) {\r\n    this.debug = options.debug\r\n  }\r\n\r\n  /**\r\n   * Logs to console a colored message\r\n   * @param message\r\n   * @param data\r\n   * @private\r\n   */\r\n  _log(message, data) {\r\n    let toLog = data ? `${message}, %c Data -> ${JSON.stringify(data)}` : `${message}`\r\n    let now = new Date().toUTCString()\r\n    console.log(`%c ${now}: %c ${toLog}`, `color: #276749;`, `color: #4299e1;`, `color: #2c3e50;`)\r\n  }\r\n\r\n  /**\r\n   * Logs to console a colored message\r\n   * @param message\r\n   * @param data\r\n   * @private\r\n   */\r\n  _error(message, data) {\r\n    let toLog = data ? `${message}, Data -> ${JSON.stringify(data)}` : `${message}`\r\n    let now = new Date().toUTCString()\r\n    console.error(`${now}: ${toLog}`)\r\n  }\r\n\r\n  /**\r\n   * Logs messages in case debug mode is set\r\n   * @param message\r\n   * @param data\r\n   */\r\n  log(message, data) {\r\n    if (this.debug) {\r\n      if (message && !data) {\r\n        this._log(message)\r\n      } else {\r\n        this._log(message, data)\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Logs error messages in case debug mode is set\r\n   * @param message\r\n   * @param data\r\n   */\r\n  error(message, data) {\r\n    if (this.debug) {\r\n      if (message && !data) {\r\n        this._error(message)\r\n      } else {\r\n        this._error(message, data)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Logger\r\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import eventTypes from '../eventTypes';\r\n\r\nexport const sdkEventReasons = {\r\n  NEWCALL: 'NEWCALL',\r\n  ANSWER: 'ANSWER',\r\n  HANGUP: 'HANGUP'\r\n}\r\nconst offlineEvents = [\r\n  eventTypes.CONNECT_ERROR,\r\n  eventTypes.CONNECT_TIMEOUT,\r\n  eventTypes.DISCONNECT,\r\n  eventTypes.RECONNECT_ATTEMPT,\r\n  eventTypes.RECONNECTING,\r\n  eventTypes.RECONNECT_ERROR,\r\n  eventTypes.RECONNECT_FAILED,\r\n  sdkEventReasons.CLOSE\r\n]\r\n\r\nfunction isSocketOffline(event) {\r\n  let { name } = event\r\n  return offlineEvents.includes(name)\r\n}\r\n\r\nexport default function onNewEvent({ eventData, store, extensionsModuleName, queuesModuleName, dialersModuleName }) {\r\n  let { name, data } = eventData\r\n  store.commit(`${extensionsModuleName}/SET_IS_SOCKET_OFFLINE`, isSocketOffline(eventData))\r\n  switch (name) {\r\n    case eventTypes.ALL_EXTENSION_STATUS:\r\n      store.dispatch(`${extensionsModuleName}/setExtensions`, data.extensions)\r\n      break;\r\n    case eventTypes.EXTENSION_EVENT:\r\n      let extension = data.data\r\n      // Event reason: NEWCALL/ANSWER/HANGUP\r\n      extension['lastEvent'] = {\r\n        reason: data.reason,\r\n        ivrid: data.ivruniqueid\r\n      }\r\n      const extensions = store.state[extensionsModuleName].extensions\r\n      let extensionIndex = extensions.findIndex(e => e.userID === extension.userID)\r\n      if (extensionIndex !== -1) {\r\n        store.dispatch(`${extensionsModuleName}/updateExtension`, {\r\n          index: extensionIndex,\r\n          extension\r\n        })\r\n      }\r\n      break;\r\n    case eventTypes.LOGIN_STATUS:\r\n      store.commit(`${extensionsModuleName}/SET_SERVER_TIME`, data)\r\n      store.dispatch(`${queuesModuleName}/setQueues`, data.queues)\r\n      break;\r\n    case eventTypes.QUEUE_EVENT:\r\n      let queue = data.data;\r\n      const allQueues = store.state[queuesModuleName].all || []\r\n      let queueIndex = allQueues.findIndex(e => e.QueueID === queue.QueueID)\r\n      if (queueIndex !== -1) {\r\n        store.dispatch(`${queuesModuleName}/updateQueue`, {\r\n          index: queueIndex,\r\n          queue\r\n        })\r\n      }\r\n      break;\r\n    case eventTypes.ALL_DIALERS_STATUS:\r\n      store.dispatch(`${dialersModuleName}/setDialers`, data.dialers)\r\n      break;\r\n    case eventTypes.DIALER_EVENT:\r\n      const dialer = data.data;\r\n      const allDialers = store.state[dialersModuleName].all || []\r\n      let dialerIndex = allDialers.findIndex(e => e.campaignID === dialer.campaignID)\r\n      if (dialerIndex !== -1) {\r\n        store.dispatch(`${dialersModuleName}/updateDialers`, {\r\n          index: dialerIndex,\r\n          dialer\r\n        })\r\n      }\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n","import colors from \"./colors\";\r\n\r\nexport const callStatuses = {\r\n  CALLING: 100,\r\n  HOLD: 101,\r\n}\r\n\r\nexport default {\r\n  1: {\r\n    icon: \"IconLogin\",\r\n    color: colors.LOGIN_COLOR,\r\n    text: 'status.login',\r\n    value: 1\r\n  },\r\n  2: {\r\n    icon: \"IconLogout\",\r\n    color: colors.LOGOUT_COLOR,\r\n    text: 'status.logout',\r\n    value: 2\r\n  },\r\n  3: {\r\n    icon: \"IconLunch\",\r\n    color: colors.LUNCH_COLOR,\r\n    text: 'status.lunch',\r\n    value: 3\r\n  },\r\n  5: {\r\n    icon: \"IconAdministrative\",\r\n    color: colors.ADMINISTRATIVE_COLOR,\r\n    text: 'status.administrative',\r\n    value: 5\r\n  },\r\n  7: {\r\n    icon: \"IconPrivate\",\r\n    color: colors.PRIVATE_COLOR,\r\n    text: 'status.private',\r\n    value: 7\r\n  },\r\n  9: {\r\n    icon: \"IconOther\",\r\n    color: colors.OTHER_COLOR,\r\n    text: 'status.other',\r\n    value: 9\r\n  },\r\n  11: {\r\n    icon: \"IconTraining\",\r\n    color: colors.TRAINING_COLOR,\r\n    text: 'status.training',\r\n    value: 11\r\n  },\r\n  12: {\r\n    icon: \"IconTeamMeeting\",\r\n    color: colors.TEAM_MEETING_COLOR,\r\n    text: 'status.teamMeeting',\r\n    value: 12\r\n  },\r\n  13: {\r\n    icon: \"IconBrief\",\r\n    color: colors.BRIEF_COLOR,\r\n    text: 'status.brief',\r\n    value: 13\r\n  },\r\n  100: {\r\n    icon: 'IconIncomingCall',\r\n    color: colors.LIGHT_GREEN,\r\n    text: 'status.incall',\r\n    value: 100\r\n  },\r\n  101: {\r\n    icon: 'IconHold',\r\n    color: colors.HOLD_COLOR,\r\n    text: 'status.hold',\r\n    value: 101\r\n  }\r\n}\r\n","import { callStatuses } from '../utils/statusTypes';\r\n\r\nconst ISRAEL_TIMEZONE_OFFSET = 180 * 60 * 1000;\r\nconst MINUTE = 60 * 1000\r\nconst LOGOUT_STATUS = 2;\r\nconst LOGIN_STATUS = 1;\r\nconst HOLD_STATUS = 'hold'\r\n\r\nconst types = {\r\n    SET_EXTENSIONS: 'SET_EXTENSIONS',\r\n    UPDATE_EXTENSIONS: 'UPDATE_EXTENSIONS',\r\n    SET_SERVER_TIME: 'SET_SERVER_TIME',\r\n    SET_IS_SOCKET_OFFLINE: 'SET_IS_SOCKET_OFFLINE',\r\n};\r\nconst state = {\r\n    extensions: [],\r\n    serverTime: null,\r\n    serverDelta: 0,\r\n    serverOffset: 0,\r\n    isSocketOffline: false,\r\n    offlineSocketTimestamp: null\r\n};\r\n\r\nconst mutations = {\r\n    [types.SET_EXTENSIONS]: (state, value) => {\r\n        state.extensions = value\r\n    },\r\n    [types.UPDATE_EXTENSIONS]: (state, {index, extension}) => {\r\n        state.extensions.splice(index, 1, extension)\r\n    },\r\n    [types.SET_SERVER_TIME]: (state, value) => {\r\n        state.serverOffset = value.servertimeoffset * 60 * 1000 || ISRAEL_TIMEZONE_OFFSET\r\n        state.serverTime = value.servertime * 1000 - state.serverOffset\r\n        state.serverDelta = new Date().getTime() - state.serverTime\r\n    },\r\n    [types.SET_IS_SOCKET_OFFLINE]: (state, value) => {\r\n        state.isSocketOffline = value\r\n        if (value) {\r\n            state.offlineSocketTimestamp = new Date().getTime()\r\n        } else {\r\n            state.offlineSocketTimestamp = null\r\n        }\r\n    }\r\n};\r\n\r\nconst actions = {\r\n    async setExtensions({commit}, value) {\r\n        commit(types.SET_EXTENSIONS, value)\r\n    },\r\n    async updateExtension({commit}, value) {\r\n        commit(types.UPDATE_EXTENSIONS, value)\r\n    },\r\n};\r\n\r\nfunction isCallOnHold(call = {}) {\r\n  let status = call.callstatus || ''\r\n  status = status.toLowerCase()\r\n  return call.answered && status === HOLD_STATUS\r\n}\r\n\r\nconst getters = {\r\n  isSocketOffline: state => {\r\n    if (!state.offlineSocketTimestamp || isNaN(state.offlineSocketTimestamp)) {\r\n      return false\r\n    }\r\n    const now = new Date().getTime()\r\n    // show after 1 minute of disconnect\r\n    return state.isSocketOffline && now - state.offlineSocketTimestamp > MINUTE\r\n  },\r\n  extensionsWithCalls: state => hideLoggedOutUsers => {\r\n    let groupedExtensions = [];\r\n\r\n    state.extensions.forEach((extension) => {\r\n\r\n      if (extension.calls.length > 0) {\r\n        if (extension.calls.filter(isCallOnHold).length) {\r\n          extension['representativeStatus'] = callStatuses.HOLD;\r\n        } else {\r\n          extension['representativeStatus'] = callStatuses.CALLING;\r\n        }\r\n      }\r\n      groupedExtensions.push(extension);\r\n    });\r\n\r\n    if (hideLoggedOutUsers) {\r\n      return groupedExtensions.filter(e => e.representativeStatus !== LOGOUT_STATUS);\r\n    }\r\n    return groupedExtensions;\r\n  },\r\n  extensionCountByStatus: (state, getters) => status => {\r\n    return getters.extensionsWithCalls.filter(el => el.representativeStatus === status).length || 0\r\n  }\r\n}\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getters,\r\n};\r\n","const types = {\r\n    SET_QUEUES: 'SET_QUEUES',\r\n    UPDATE_QUEUES: 'UPDATE_QUEUES',\r\n}\r\nconst state = {\r\n    all: [],\r\n}\r\n\r\nconst mutations = {\r\n    [types.SET_QUEUES]: (state, value) => {\r\n        state.all = value\r\n    },\r\n    [types.UPDATE_QUEUES]: (state, {index, queue}) => {\r\n        state.all.splice(index, 1, queue)\r\n    },\r\n}\r\n\r\nconst actions = {\r\n    async setQueues({commit}, value) {\r\n        commit(types.SET_QUEUES, value)\r\n    },\r\n    async updateQueue({commit}, value) {\r\n        commit(types.UPDATE_QUEUES, value)\r\n    },\r\n}\r\n\r\nconst getters = {\r\n  queueWithActiveCalls: (state) => {\r\n    return state.all.filter((el) => el.Calls.length)\r\n  },\r\n  allQueueCalls: (state, getters) => {\r\n    const allCalls = []\r\n    getters.queueWithActiveCalls.forEach((queue) => {\r\n      const calls = queue.Calls || []\r\n      allCalls.push(...calls)\r\n    })\r\n    return allCalls\r\n  },\r\n  filterQueuesByIds: (state) => queueIds => {\r\n    if (!queueIds || !Array.isArray(queueIds)) {\r\n      return state.all\r\n    }\r\n    return state.all.filter(e => queueIds.includes(e.QueueID))\r\n  }\r\n}\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getters,\r\n}\r\n","const types = {\r\n  SET_DIALERS: 'SET_DIALERS',\r\n  UPDATE_DIALERS: 'UPDATE_DIALERS'\r\n}\r\n\r\nconst state = {\r\n  all: []\r\n}\r\n\r\nconst mutations = {\r\n  [types.SET_DIALERS]: (state, value) => {\r\n    state.all = value\r\n  },\r\n  [types.UPDATE_DIALERS]: (state, { index, dialer }) => {\r\n    state.all.splice(index, 1, dialer)\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  async setDialers({commit}, value) {\r\n    commit(types.SET_DIALERS, value)\r\n  },\r\n  async updateDialers({commit}, value) {\r\n    commit(types.UPDATE_DIALERS, value)\r\n  }\r\n}\r\n\r\nconst getters = {\r\n  getAllDialers: (state) => {\r\n    return state.all\r\n  },\r\n  getAllDialersWithTypeIVR: (state) => {\r\n    return state.all.filter(el => el.type === 'IVR')\r\n  },\r\n  getAllDialersWithTypeAUTOMATIC: (state) => {\r\n    return state.all.filter(el => el.type === 'Automatic')\r\n  }\r\n}\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getters,\r\n}\r\n","export function getServerWithHighestPriority(servers) {\r\n  // Highest priority server is the one with lowest Priority value\r\n  let chosenServer = null\r\n  let maxPriority = Number.MAX_SAFE_INTEGER\r\n  servers.forEach(server => {\r\n    if (server.Priority < maxPriority) {\r\n      maxPriority = server.Priority\r\n      chosenServer = server\r\n    }\r\n  })\r\n  return chosenServer\r\n}\r\n\r\nexport function isValidDate(date) {\r\n  return !isNaN(date.getTime())\r\n}\r\n","export async function externalLogin(url, { email, password, token, username }) {\r\n  let body = null\r\n  if (token) {\r\n    body = JSON.stringify({ token })\r\n  } else if (username) {\r\n    body = JSON.stringify({\r\n      username,\r\n      password\r\n    })\r\n  } else {\r\n    body = JSON.stringify({\r\n      email,\r\n      pin: password\r\n    })\r\n  }\r\n  const res = await fetch(url, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body,\r\n  });\r\n  const data = await res.json();\r\n  if (data.error) {\r\n    throw new Error(data.error)\r\n  }\r\n  return data.Data.Socket;\r\n}\r\n\r\nexport function getExternalLoginUrl(baseUrl, loginType) {\r\n  if (loginType === 'user') {\r\n    return `${baseUrl}/User`\r\n  } else if (loginType === 'token') {\r\n    return `${baseUrl}/Token`\r\n  } else if (loginType === 'account') {\r\n    return `${baseUrl}/Account`\r\n  }\r\n  return baseUrl\r\n}\r\n\r\nexport async function refreshToken(url, oldRefreshToken) {\r\n  const res = await fetch(url, {\r\n    method: 'GET',\r\n\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${oldRefreshToken}`\r\n    }\r\n  });\r\n  return res.json();\r\n}\r\n","import environments from './environments'\r\n\r\nfunction loadBrowserScript(url) {\r\n  return new Promise((resolve, reject) => {\r\n    const script = document.createElement('script');\r\n    script.src = url;\r\n    script.onload = () => {\r\n      resolve();\r\n    };\r\n    script.onerror = () => {\r\n      reject();\r\n    };\r\n    document.body.append(script);\r\n  });\r\n}\r\n\r\nasync function loadExtensionScript(url) {\r\n  try {\r\n    let script = await fetch(url)\r\n    script = await script.text()\r\n\r\n    eval(script)\r\n  } catch (e) {\r\n    return Promise.reject(e)\r\n  }\r\n}\r\n\r\nexport async function loadExternalScript(url, environment, getSocketIOFunction) {\r\n  if (typeof getSocketIOFunction === 'function') {\r\n    self.io = getSocketIOFunction(url)\r\n\r\n    return\r\n  }\r\n\r\n  switch (environment) {\r\n    case environments.BROWSER:\r\n      await loadBrowserScript(url)\r\n      break\r\n    case environments.CHROME_EXTENSION:\r\n      await loadExtensionScript(url)\r\n  }\r\n}\r\n","/**\n * [js-md5]{@link https://github.com/emn178/js-md5}\n *\n * @namespace md5\n * @version 0.7.3\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_MD5_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_MD5_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_MD5_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_MD5_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [128, 32768, 8388608, -2147483648];\n  var SHIFT = [0, 8, 16, 24];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'buffer', 'arrayBuffer', 'base64'];\n  var BASE64_ENCODE_CHAR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n  var blocks = [], buffer8;\n  if (ARRAY_BUFFER) {\n    var buffer = new ArrayBuffer(68);\n    buffer8 = new Uint8Array(buffer);\n    blocks = new Uint32Array(buffer);\n  }\n\n  if (root.JS_MD5_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  /**\n   * @method hex\n   * @memberof md5\n   * @description Output hash as hex string\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {String} Hex string\n   * @example\n   * md5.hex('The quick brown fox jumps over the lazy dog');\n   * // equal to\n   * md5('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method digest\n   * @memberof md5\n   * @description Output hash as bytes array\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Array} Bytes array\n   * @example\n   * md5.digest('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method array\n   * @memberof md5\n   * @description Output hash as bytes array\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Array} Bytes array\n   * @example\n   * md5.array('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method arrayBuffer\n   * @memberof md5\n   * @description Output hash as ArrayBuffer\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @example\n   * md5.arrayBuffer('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method buffer\n   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n   * @memberof md5\n   * @description Output hash as ArrayBuffer\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @example\n   * md5.buffer('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method base64\n   * @memberof md5\n   * @description Output hash as base64 string\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {String} base64 string\n   * @example\n   * md5.base64('The quick brown fox jumps over the lazy dog');\n   */\n  var createOutputMethod = function (outputType) {\n    return function (message) {\n      return new Md5(true).update(message)[outputType]();\n    };\n  };\n\n  /**\n   * @method create\n   * @memberof md5\n   * @description Create Md5 object\n   * @returns {Md5} Md5 object.\n   * @example\n   * var hash = md5.create();\n   */\n  /**\n   * @method update\n   * @memberof md5\n   * @description Create and update Md5 object\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Md5} Md5 object.\n   * @example\n   * var hash = md5.update('The quick brown fox jumps over the lazy dog');\n   * // equal to\n   * var hash = md5.create();\n   * hash.update('The quick brown fox jumps over the lazy dog');\n   */\n  var createMethod = function () {\n    var method = createOutputMethod('hex');\n    if (NODE_JS) {\n      method = nodeWrap(method);\n    }\n    method.create = function () {\n      return new Md5();\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash('md5').update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw ERROR;\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash('md5').update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  /**\n   * Md5 class\n   * @class Md5\n   * @description This is internal class.\n   * @see {@link md5.create}\n   */\n  function Md5(sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n      this.buffer8 = buffer8;\n    } else {\n      if (ARRAY_BUFFER) {\n        var buffer = new ArrayBuffer(68);\n        this.buffer8 = new Uint8Array(buffer);\n        this.blocks = new Uint32Array(buffer);\n      } else {\n        this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n      }\n    }\n    this.h0 = this.h1 = this.h2 = this.h3 = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n  }\n\n  /**\n   * @method update\n   * @memberof Md5\n   * @instance\n   * @description Update hash\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Md5} Md5 object.\n   * @see {@link md5.update}\n   */\n  Md5.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw ERROR;\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw ERROR;\n          }\n        }\n      } else {\n        throw ERROR;\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n    var buffer8 = this.buffer8;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = blocks[16];\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        if (ARRAY_BUFFER) {\n          for (i = this.start; index < length && i < 64; ++index) {\n            buffer8[i++] = message[index];\n          }\n        } else {\n          for (i = this.start; index < length && i < 64; ++index) {\n            blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n          }\n        }\n      } else {\n        if (ARRAY_BUFFER) {\n          for (i = this.start; index < length && i < 64; ++index) {\n            code = message.charCodeAt(index);\n            if (code < 0x80) {\n              buffer8[i++] = code;\n            } else if (code < 0x800) {\n              buffer8[i++] = 0xc0 | (code >> 6);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            } else if (code < 0xd800 || code >= 0xe000) {\n              buffer8[i++] = 0xe0 | (code >> 12);\n              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            } else {\n              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n              buffer8[i++] = 0xf0 | (code >> 18);\n              buffer8[i++] = 0x80 | ((code >> 12) & 0x3f);\n              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            }\n          }\n        } else {\n          for (i = this.start; index < length && i < 64; ++index) {\n            code = message.charCodeAt(index);\n            if (code < 0x80) {\n              blocks[i >> 2] |= code << SHIFT[i++ & 3];\n            } else if (code < 0x800) {\n              blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            } else if (code < 0xd800 || code >= 0xe000) {\n              blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            } else {\n              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n              blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            }\n          }\n        }\n      }\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Md5.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = blocks[16];\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.bytes << 3;\n    blocks[15] = this.hBytes << 3 | this.bytes >>> 29;\n    this.hash();\n  };\n\n  Md5.prototype.hash = function () {\n    var a, b, c, d, bc, da, blocks = this.blocks;\n\n    if (this.first) {\n      a = blocks[0] - 680876937;\n      a = (a << 7 | a >>> 25) - 271733879 << 0;\n      d = (-1732584194 ^ a & 2004318071) + blocks[1] - 117830708;\n      d = (d << 12 | d >>> 20) + a << 0;\n      c = (-271733879 ^ (d & (a ^ -271733879))) + blocks[2] - 1126478375;\n      c = (c << 17 | c >>> 15) + d << 0;\n      b = (a ^ (c & (d ^ a))) + blocks[3] - 1316259209;\n      b = (b << 22 | b >>> 10) + c << 0;\n    } else {\n      a = this.h0;\n      b = this.h1;\n      c = this.h2;\n      d = this.h3;\n      a += (d ^ (b & (c ^ d))) + blocks[0] - 680876936;\n      a = (a << 7 | a >>> 25) + b << 0;\n      d += (c ^ (a & (b ^ c))) + blocks[1] - 389564586;\n      d = (d << 12 | d >>> 20) + a << 0;\n      c += (b ^ (d & (a ^ b))) + blocks[2] + 606105819;\n      c = (c << 17 | c >>> 15) + d << 0;\n      b += (a ^ (c & (d ^ a))) + blocks[3] - 1044525330;\n      b = (b << 22 | b >>> 10) + c << 0;\n    }\n\n    a += (d ^ (b & (c ^ d))) + blocks[4] - 176418897;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[5] + 1200080426;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[6] - 1473231341;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[7] - 45705983;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (d ^ (b & (c ^ d))) + blocks[8] + 1770035416;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[9] - 1958414417;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[10] - 42063;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[11] - 1990404162;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (d ^ (b & (c ^ d))) + blocks[12] + 1804603682;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[13] - 40341101;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[14] - 1502002290;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[15] + 1236535329;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[1] - 165796510;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[6] - 1069501632;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[11] + 643717713;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[0] - 373897302;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[5] - 701558691;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[10] + 38016083;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[15] - 660478335;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[4] - 405537848;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[9] + 568446438;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[14] - 1019803690;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[3] - 187363961;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[8] + 1163531501;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[13] - 1444681467;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[2] - 51403784;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[7] + 1735328473;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[12] - 1926607734;\n    b = (b << 20 | b >>> 12) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[5] - 378558;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[8] - 2022574463;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[11] + 1839030562;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[14] - 35309556;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[1] - 1530992060;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[4] + 1272893353;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[7] - 155497632;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[10] - 1094730640;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[13] + 681279174;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[0] - 358537222;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[3] - 722521979;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[6] + 76029189;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[9] - 640364487;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[12] - 421815835;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[15] + 530742520;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[2] - 995338651;\n    b = (b << 23 | b >>> 9) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[0] - 198630844;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[7] + 1126891415;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[14] - 1416354905;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[5] - 57434055;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[12] + 1700485571;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[3] - 1894986606;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[10] - 1051523;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[1] - 2054922799;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[8] + 1873313359;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[15] - 30611744;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[6] - 1560198380;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[13] + 1309151649;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[4] - 145523070;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[11] - 1120210379;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[2] + 718787259;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[9] - 343485551;\n    b = (b << 21 | b >>> 11) + c << 0;\n\n    if (this.first) {\n      this.h0 = a + 1732584193 << 0;\n      this.h1 = b - 271733879 << 0;\n      this.h2 = c - 1732584194 << 0;\n      this.h3 = d + 271733878 << 0;\n      this.first = false;\n    } else {\n      this.h0 = this.h0 + a << 0;\n      this.h1 = this.h1 + b << 0;\n      this.h2 = this.h2 + c << 0;\n      this.h3 = this.h3 + d << 0;\n    }\n  };\n\n  /**\n   * @method hex\n   * @memberof Md5\n   * @instance\n   * @description Output hash as hex string\n   * @returns {String} Hex string\n   * @see {@link md5.hex}\n   * @example\n   * hash.hex();\n   */\n  Md5.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;\n\n    return HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F];\n  };\n\n  /**\n   * @method toString\n   * @memberof Md5\n   * @instance\n   * @description Output hash as hex string\n   * @returns {String} Hex string\n   * @see {@link md5.hex}\n   * @example\n   * hash.toString();\n   */\n  Md5.prototype.toString = Md5.prototype.hex;\n\n  /**\n   * @method digest\n   * @memberof Md5\n   * @instance\n   * @description Output hash as bytes array\n   * @returns {Array} Bytes array\n   * @see {@link md5.digest}\n   * @example\n   * hash.digest();\n   */\n  Md5.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;\n    return [\n      h0 & 0xFF, (h0 >> 8) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 24) & 0xFF,\n      h1 & 0xFF, (h1 >> 8) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 24) & 0xFF,\n      h2 & 0xFF, (h2 >> 8) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 24) & 0xFF,\n      h3 & 0xFF, (h3 >> 8) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 24) & 0xFF\n    ];\n  };\n\n  /**\n   * @method array\n   * @memberof Md5\n   * @instance\n   * @description Output hash as bytes array\n   * @returns {Array} Bytes array\n   * @see {@link md5.array}\n   * @example\n   * hash.array();\n   */\n  Md5.prototype.array = Md5.prototype.digest;\n\n  /**\n   * @method arrayBuffer\n   * @memberof Md5\n   * @instance\n   * @description Output hash as ArrayBuffer\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @see {@link md5.arrayBuffer}\n   * @example\n   * hash.arrayBuffer();\n   */\n  Md5.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(16);\n    var blocks = new Uint32Array(buffer);\n    blocks[0] = this.h0;\n    blocks[1] = this.h1;\n    blocks[2] = this.h2;\n    blocks[3] = this.h3;\n    return buffer;\n  };\n\n  /**\n   * @method buffer\n   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n   * @memberof Md5\n   * @instance\n   * @description Output hash as ArrayBuffer\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @see {@link md5.buffer}\n   * @example\n   * hash.buffer();\n   */\n  Md5.prototype.buffer = Md5.prototype.arrayBuffer;\n\n  /**\n   * @method base64\n   * @memberof Md5\n   * @instance\n   * @description Output hash as base64 string\n   * @returns {String} base64 string\n   * @see {@link md5.base64}\n   * @example\n   * hash.base64();\n   */\n  Md5.prototype.base64 = function () {\n    var v1, v2, v3, base64Str = '', bytes = this.array();\n    for (var i = 0; i < 15;) {\n      v1 = bytes[i++];\n      v2 = bytes[i++];\n      v3 = bytes[i++];\n      base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] +\n        BASE64_ENCODE_CHAR[(v1 << 4 | v2 >>> 4) & 63] +\n        BASE64_ENCODE_CHAR[(v2 << 2 | v3 >>> 6) & 63] +\n        BASE64_ENCODE_CHAR[v3 & 63];\n    }\n    v1 = bytes[i];\n    base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] +\n      BASE64_ENCODE_CHAR[(v1 << 4) & 63] +\n      '==';\n    return base64Str;\n  };\n\n  var exports = createMethod();\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    /**\n     * @method md5\b\n     * @description Md5 hash function, export to global in browsers.\n     * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n     * @returns {String} md5 hashes\n     * @example\n     * md5(''); // d41d8cd98f00b204e9800998ecf8427e\n     * md5('The quick brown fox jumps over the lazy dog'); // 9e107d9d372bb6826bd81d3542a419d6\n     * md5('The quick brown fox jumps over the lazy dog.'); // e4d909c290d0fb1ca068ffaddf22cbd0\n     *\n     * // It also supports UTF-8 encoding\n     * md5('中文'); // a7bac2239fcdcb3a067903d8077c4a07\n     *\n     * // It also supports byte `Array`, `Uint8Array`, `ArrayBuffer`\n     * md5([]); // d41d8cd98f00b204e9800998ecf8427e\n     * md5(new Uint8Array([])); // d41d8cd98f00b204e9800998ecf8427e\n     */\n    root.md5 = exports;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","import eventTypes from './eventTypes';\r\nimport environments from './utils/environments'\r\nimport { defaultServers } from './config';\r\nimport Logger from './Logger';\r\nimport debounce from 'lodash/debounce'\r\nimport handleStoreEvents from './store/handleStoreEvents'\r\nimport extensionsModule from './store/extensions'\r\nimport queuesModule from './store/queues'\r\nimport dialersModule from './store/dialers'\r\nimport { getServerWithHighestPriority, isValidDate } from './utils';\r\nimport { externalLogin, refreshToken, getExternalLoginUrl } from './utils/externalLogin';\r\nimport { loadExternalScript } from './utils/loadExternalScript'\r\nimport md5 from \"js-md5\";\r\n\r\n\r\nconst defaultOptions = {\r\n  url: `https://monitorapi.voicenter.co.il/monitorAPI/getMonitorUrls`,\r\n  environment: environments.BROWSER,\r\n  getSocketIOFunction: undefined,\r\n  fallbackServer: {\r\n    Domain: 'monitor5.voicenter.co.il',\r\n    Priority: 0,\r\n  },\r\n  loginUrl: 'https://loginapi.voicenter.co.il/monitorAPI/Login',\r\n  refreshTokenUrl: 'https://loginapi.voicenter.co.il/monitorAPI/RefreshIdentityToken',\r\n  servers: defaultServers,\r\n  token: null,\r\n  loginType: 'token',\r\n  forceNew: true,\r\n  reconnectionDelay: 10000,\r\n  reconnectionDelayMax: 10000,\r\n  maxReconnectAttempts: 2,\r\n  timeout: 10000,\r\n  keepAliveTimeout: 60000,\r\n  idleInterval: 60000 * 5, // 5 minutes\r\n  protocol: 'https',\r\n  transports: ['websocket'],\r\n  upgrade: false,\r\n  store: null,\r\n  extensionsModuleName: 'sdkExtensions',\r\n  queuesModuleName: 'sdkQueues',\r\n  dialersModuleName: 'sdkDialers',\r\n  serverFetchStrategy: 'remote', // get servers from external url options: remote | static\r\n  serverType: null, // can be 1 or 2. 2 is used for chrome extension\r\n};\r\n\r\nlet allConnections = [];\r\nlet listenersMap = new Map();\r\n\r\nclass EventsSDK {\r\n  constructor(options = {}) {\r\n    this.options = {\r\n      ...defaultOptions,\r\n      ...options,\r\n    };\r\n    this.argumentOptions = {\r\n      ...options\r\n    }\r\n    if (!this.options.loginType) {\r\n      throw new Error('A login type should be provided');\r\n    }\r\n    this.Logger = new Logger(this.options);\r\n    this.servers = [];\r\n    this.server = null;\r\n    this.socket = null;\r\n    this.connected = false;\r\n    this.connectionEstablished = false;\r\n    this._lastEventTimestamp = new Date().getTime();\r\n    this._initReconnectOptions();\r\n    this._listenersMap = listenersMap;\r\n    this._retryConnection = debounce(this._connect.bind(this), this.reconnectOptions.reconnectionDelay, {\r\n      leading: true,\r\n      trailing: false\r\n    });\r\n    this._lastLoginTimestamp = null;\r\n    this._handleLocalEvents = false;\r\n    this._registerExtensionsModule();\r\n    this._registerQueueModule();\r\n    this._registerDialerModule();\r\n  }\r\n\r\n  getLastEventTimestamp() {\r\n    return this._lastEventTimestamp\r\n  }\r\n  _reSync () {\r\n    this.emit(eventTypes.RESYNC, {\r\n      cache: false\r\n    });\r\n  }\r\n  _registerExtensionsModule() {\r\n    const moduleName = this.options.extensionsModuleName || 'sdkExtensions'\r\n    if (!this._validateStoreModule(moduleName)) {\r\n      return\r\n    }\r\n    this.options.store.registerModule(moduleName, extensionsModule)\r\n    this._handleLocalEvents = true\r\n  }\r\n\r\n  _registerQueueModule() {\r\n    const moduleName = this.options.queuesModuleName || 'sdkQueues'\r\n    if (!this._validateStoreModule(moduleName)) {\r\n      return\r\n    }\r\n    this.options.store.registerModule(moduleName, queuesModule)\r\n    this._handleLocalEvents = true\r\n  }\r\n\r\n  _registerDialerModule() {\r\n    const moduleName = this.options.dialersModuleName || 'sdkDialers'\r\n    if (!this._validateStoreModule(moduleName)) {\r\n      return\r\n    }\r\n    this.options.store.registerModule(moduleName, dialersModule)\r\n    this._handleLocalEvents = true\r\n  }\r\n\r\n  _validateStoreModule(moduleName) {\r\n    const { store } = this.options\r\n    if (!store) {\r\n      return false\r\n    }\r\n    if (store.state[moduleName]) {\r\n      store.unregisterModule(moduleName)\r\n    }\r\n    return true\r\n  }\r\n\r\n  _initReconnectOptions() {\r\n    this.reconnectOptions = {\r\n      retryCount: 1,\r\n      maxReconnectAttempts: this.options.maxReconnectAttempts,\r\n      reconnectionDelay: this.options.reconnectionDelay, // 10 seconds. After each re-connection attempt this number will increase (minReconnectionDelay * attempts) => 10, 20, 30, 40 seconds ... up to 5min\r\n      minReconnectionDelay: this.options.reconnectionDelay, // 10 seconds\r\n      maxReconnectionDelay: 60000 * 5 // 5 minutes\r\n    }\r\n  }\r\n\r\n  _onConnect() {\r\n    this._initReconnectDelays();\r\n    this.connected = true;\r\n    this.Logger.log(eventTypes.CONNECT, this.reconnectOptions);\r\n  }\r\n\r\n  _initReconnectDelays() {\r\n    this.reconnectOptions.retryCount = 1;\r\n    let minReconnectDelay = this.reconnectOptions.minReconnectionDelay;\r\n    this.reconnectOptions.reconnectionDelay = minReconnectDelay;\r\n    this.socket.io.reconnectionDelay(minReconnectDelay);\r\n    this.socket.io.reconnectionDelayMax(minReconnectDelay);\r\n  }\r\n\r\n  _onConnectError(data) {\r\n    this._retryConnection('next', true);\r\n    this.connected = false;\r\n    this.Logger.log(eventTypes.CONNECT_ERROR, data)\r\n  }\r\n\r\n  _onError(err) {\r\n    this.Logger.log(eventTypes.ERROR, err);\r\n  }\r\n\r\n  _onReconnectFailed() {\r\n    this._retryConnection('next',true);\r\n    this.Logger.log(eventTypes.RECONNECT_FAILED, this.reconnectOptions);\r\n  }\r\n\r\n  _onConnectTimeout() {\r\n    this._retryConnection('next',true);\r\n    this.Logger.log(eventTypes.CONNECT_TIMEOUT, this.reconnectOptions)\r\n  }\r\n\r\n  _onReconnectAttempt() {\r\n    this.connected = false;\r\n    if (this.reconnectOptions.retryCount >= this.reconnectOptions.maxReconnectAttempts) {\r\n      this._retryConnection('next',true);\r\n      return;\r\n    }\r\n    if (this.reconnectOptions.reconnectionDelay < this.reconnectOptions.maxReconnectionDelay) {\r\n      let newDelay = this.reconnectOptions.minReconnectionDelay * this.reconnectOptions.retryCount;\r\n      this.reconnectOptions.reconnectionDelay = newDelay;\r\n      this.socket.io.reconnectionDelay(newDelay);\r\n      this.socket.io.reconnectionDelayMax(newDelay);\r\n    }\r\n    this.reconnectOptions.retryCount++;\r\n    this.Logger.log(eventTypes.RECONNECT_ATTEMPT, this.reconnectOptions)\r\n  }\r\n\r\n  _onDisconnect(reason) {\r\n    this.connected = false;\r\n    this.Logger.log(eventTypes.DISCONNECT, reason);\r\n    this._connect('next', true)\r\n  }\r\n\r\n  _onKeepAlive(data) {\r\n    if (typeof data === 'object' && data.errorCode !== 0) {\r\n      this._initSocketConnection();\r\n      return\r\n    }\r\n    if (data && this.connected) {\r\n      this.Logger.log(eventTypes.KEEP_ALIVE_RESPONSE);\r\n      this._lastEventTimestamp = new Date().getTime()\r\n    } else {\r\n      this._initSocketConnection();\r\n    }\r\n  }\r\n\r\n  async _onLoginResponse(data) {\r\n    if (data.Client) {\r\n      await loadExternalScript(data.Client, this.options.environment, this.options.getSocketIOFunction)\r\n    }\r\n    if (data.URL) {\r\n      this.server = {\r\n        Priority: 0,\r\n        Domain: data.URL.replace('https://', '')\r\n      }\r\n    }\r\n    if (data.URLList && Array.isArray(data.URLList)) {\r\n      this.servers = data.URLList.map((url, index) => {\r\n        return {\r\n          Priority: index,\r\n          Domain: url.replace('https://', '')\r\n        }\r\n      })\r\n    }\r\n    if (data.Token) {\r\n      this.options.token = data.Token;\r\n      this.token = data.Token\r\n      await this._connect('default', true)\r\n    }\r\n    if (data.TokenExpiry) {\r\n      this.options.tokenExpiry = data.TokenExpiry\r\n    }\r\n    if (data.RefreshToken) {\r\n      this.options.refreshToken = data.RefreshToken\r\n      this._handleTokenExpiry()\r\n    }\r\n\r\n  }\r\n\r\n  _handleTokenExpiry() {\r\n    const date = new Date(this.options.tokenExpiry)\r\n    if (!isValidDate(date)) {\r\n      return\r\n    }\r\n    const timeout = date.getTime() - new Date().getTime() - 5000 // 5 seconds before expire\r\n    setTimeout(async () => {\r\n      let Socket = null\r\n      const res = await refreshToken(this.options.refreshTokenUrl, this.options.refreshToken)\r\n      if(res.Data){\r\n        Socket = res.Data.Socket;\r\n        return await this._onLoginResponse(Socket)\r\n      }\r\n      throw new Error(`Error on refreshToken`)\r\n    }, timeout)\r\n  }\r\n\r\n  _parsePacket(packet) {\r\n    if (!packet.data) {\r\n      return {};\r\n    }\r\n    let name = packet.data[0];\r\n    let data = packet.data[1];\r\n    return {\r\n      name,\r\n      data\r\n    };\r\n  }\r\n\r\n  async _connect(server = 'default', skipLogin = false) {\r\n    let serverToConnect = null;\r\n    if (server === 'default') {\r\n      serverToConnect = this._findCurrentServer();\r\n    } else if (server === 'next') {\r\n      serverToConnect = this._findNextAvailableServer()\r\n    } else if (server === 'prev') {\r\n      serverToConnect = this._findMaxPriorityServer()\r\n    } else {\r\n      throw new Error(`Incorrect 'server' parameter passed to connect function ${server}. Should be 'default' or 'next'`)\r\n    }\r\n    if (!serverToConnect) {\r\n      this.server = this._findCurrentServer();\r\n    }\r\n    this._initSocketConnection();\r\n    this._initSocketEvents();\r\n    this._initKeepAlive();\r\n    this._initReconnectDelays();\r\n    if (skipLogin) {\r\n      return\r\n    }\r\n    await this.login(this.options.loginType)\r\n  }\r\n\r\n  _checkInit() {\r\n    if (!this.connectionEstablished) {\r\n      throw new Error('Make sure you call \"sdk.init()\" before doing other operations.')\r\n    }\r\n  }\r\n\r\n  _initSocketConnection() {\r\n    let domain = this.server.Domain;\r\n    let protocol = this.options.protocol;\r\n    let url = `${protocol}://${domain}`;\r\n    this.Logger.log('Connecting to..', url);\r\n    this.closeAllConnections();\r\n    const options = {\r\n      reconnection: false,\r\n      perMessageDeflate: false,\r\n      upgrade: false,\r\n      transports: ['websocket'],\r\n      debug: false\r\n    }\r\n    if (this.token) {\r\n      options.query = {\r\n        token: this.token\r\n      }\r\n    }\r\n    this.socket = self.io(url, options)\r\n\r\n    allConnections.push(this.socket);\r\n    this.connectionEstablished = true;\r\n  }\r\n  _initSocketEvents() {\r\n    this.socket\r\n    .on(eventTypes.RECONNECT_ATTEMPT, data => this._onReconnectAttempt(data))\r\n    .on(eventTypes.RECONNECT_FAILED, data => this._onReconnectFailed(data))\r\n    .on(eventTypes.CONNECT, data => this._onConnect(data))\r\n    .on(eventTypes.CONNECT_TIMEOUT , data => this._onConnectTimeout(data))\r\n    .on(eventTypes.CONNECT_ERROR, data => this._onConnectError(data))\r\n    .on(eventTypes.RECONNECT_ERROR, data => this._onReconnectAttempt(data))\r\n    .on(eventTypes.ERROR, data => this._onError(data))\r\n    .on(eventTypes.DISCONNECT, data => this._onDisconnect(data))\r\n    this.socket.onpacket = this._onEvent.bind(this)\r\n    this.socket.onevent = this._onEvent.bind(this)\r\n  }\r\n\r\n  _initKeepAlive() {\r\n    if (this.keepAliveInterval) {\r\n      clearInterval(this.keepAliveInterval)\r\n    }\r\n\r\n    if (this.idleInterval) {\r\n      clearInterval((this.idleInterval))\r\n    }\r\n    this.keepAliveInterval = setInterval(async () => {\r\n      const now = new Date().getTime()\r\n      const delta = this.options.keepAliveTimeout * 2\r\n\r\n      if (now > this.getLastEventTimestamp() + delta) {\r\n        await this._connect('next', true)\r\n        return\r\n      }\r\n      if (!this.socket) {\r\n        this._initSocketConnection();\r\n        return\r\n      }\r\n      if (now > this.getLastEventTimestamp() + this.options.keepAliveTimeout) {\r\n        this.emit(eventTypes.KEEP_ALIVE, this.options.token);\r\n        return\r\n      }\r\n\r\n    }, this.options.keepAliveTimeout);\r\n\r\n    // this.idleInterval = setInterval(() => {\r\n    //   this.reSync(false)\r\n    // }, this.options.idleInterval)\r\n  }\r\n\r\n  _findCurrentServer() {\r\n    let server = null;\r\n    if (this.servers.length) {\r\n      server = this.servers[0];\r\n    }\r\n    this.server = server;\r\n    if (!this.server) {\r\n      this.server = this.options.fallbackServer\r\n    }\r\n    return this.server;\r\n  }\r\n\r\n  _findNextAvailableServer() {\r\n    let currentServerPriority = this.server.Priority;\r\n    this.Logger.log(`Failover -> Trying to find another server`);\r\n    if (currentServerPriority === this.servers.length - 1) {\r\n      return this._findMaxPriorityServer()\r\n    }\r\n    let nextServerPriority = currentServerPriority + 1\r\n    let nextServer = this.servers.find(server => server.Priority === nextServerPriority);\r\n    if (!nextServer) {\r\n      nextServer = this._findMaxPriorityServer();\r\n      if (!nextServer) {\r\n        return\r\n      }\r\n    }\r\n    if (this.server.Domain !== nextServer.Domain) {\r\n      this.server = nextServer;\r\n      return this.server\r\n    }\r\n    this.Logger.log(`Failover -> Found new server. Connecting to it...`, this.server);\r\n    return null\r\n  }\r\n\r\n  _findMaxPriorityServer() {\r\n    this.Logger.log(`Fallback -> Trying to find previous server`, '_findMaxPriorityServer');\r\n    let maxPriorityServer = getServerWithHighestPriority(this.servers);\r\n    if (!this.server) {\r\n      this.server = maxPriorityServer;\r\n      return this.server\r\n    }\r\n    if (this.server && maxPriorityServer.Domain !== this.server.Domain) {\r\n      this.server = maxPriorityServer;\r\n      this.Logger.log(`Fallback -> Trying to find previous server`, this.server);\r\n      return this.server\r\n    }\r\n    return null\r\n  }\r\n\r\n  async _getServers() {\r\n    // Ignore server fetch if we have a list of servers passed via options\r\n    if (this.options.serverFetchStrategy === 'static' && this.argumentOptions.servers && Array.isArray(this.argumentOptions.servers) && this.argumentOptions.servers.length > 1) {\r\n      this.servers = this.argumentOptions.servers\r\n    }\r\n  }\r\n\r\n  _onEvent(packet) {\r\n    if (!packet.data) {\r\n      return;\r\n    }\r\n    let evt = this._parsePacket(packet);\r\n    this.Logger.log(`New event -> ${evt.name}`, evt);\r\n    this._lastEventTimestamp = new Date().getTime()\r\n    this._listenersMap.forEach((callback, eventName) => {\r\n      if (eventName === '*') {\r\n        callback(evt);\r\n      } else if (evt.name === eventName) {\r\n        callback(evt);\r\n      }\r\n    })\r\n    const eventMappings = {\r\n      [eventTypes.KEEP_ALIVE_RESPONSE]: this._onKeepAlive,\r\n      [eventTypes.LOGIN_RESPONSE]: this._onLoginResponse,\r\n      [eventTypes.EXTENSION_UPDATED]: this._reSync,\r\n      [eventTypes.QUEUES_UPDATED]: this._reSync,\r\n      [eventTypes.DIALERS_UPDATED]: this._reSync,\r\n      [eventTypes.LOGIN_STATUS]: () => {\r\n        if (!this.connected) {\r\n          this._onConnect()\r\n        }\r\n      }\r\n    };\r\n    const eventHandler = eventMappings[evt.name];\r\n    if (eventHandler && typeof eventHandler === 'function') {\r\n      eventHandler.call(this, evt.data);\r\n    }\r\n    if (this._handleLocalEvents) {\r\n      handleStoreEvents({\r\n        eventData: evt,\r\n        ...this.options\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initializes socket connection. Should be called before any other action\r\n   * @return {Promise<boolean>}\r\n   */\r\n  async init() {\r\n    if (this.connectionEstablished) {\r\n      return true;\r\n    }\r\n    if (this.socket) {\r\n      this.emit(eventTypes.CLOSE);\r\n    }\r\n    await this._getToken();\r\n    await this._getTabsSession();\r\n    await this.login(this.options.loginType)\r\n    await this._getServers();\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Sets the monitor code token\r\n   * @param token\r\n   */\r\n  async setToken(token) {\r\n    this.options.token = token\r\n    this.disconnect()\r\n    await this.init()\r\n  }\r\n\r\n  /**\r\n   * Closes all existing connections\r\n   */\r\n  closeAllConnections() {\r\n    allConnections.forEach(connection => {\r\n      connection.close()\r\n      connection.disconnect()\r\n    })\r\n    allConnections = []\r\n    if (this.socket) {\r\n      this.socket.disconnect()\r\n      this.socket.close()\r\n      this.socket = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Disconnects the socket instance from the servers\r\n   */\r\n  disconnect() {\r\n    this._listenersMap = new Map();\r\n    this.closeAllConnections()\r\n  }\r\n\r\n  /**\r\n   * Listens for new events\r\n   * @param {string} eventName (name of the event, * for all events)\r\n   * @param {function} callback (callback function when even with the specified name is received)\r\n   */\r\n  on(eventName, callback) {\r\n    this._listenersMap.set(eventName, callback);\r\n    this._checkInit()\r\n  }\r\n\r\n  /**\r\n   * Emits an event to the server\r\n   * @param {string} eventName (name of the event)\r\n   * @param {object} data (data for the event)\r\n   */\r\n\r\n  emit(eventName, data = {}) {\r\n    this._checkInit();\r\n    this.Logger.log(`EMIT -> ${eventName}`, data);\r\n    this.socket.emit(eventName, data);\r\n  }\r\n\r\n  /**\r\n   * Calls resync event to resync socket data\r\n   * @param cache\r\n   */\r\n  reSync(cache = true) {\r\n    this.emit(eventTypes.RESYNC, { cache })\r\n  }\r\n\r\n  async setMonitorUrl(url) {\r\n    const oldUrl = this.options.url\r\n    const oldStrategy = this.options.serverFetchStrategy\r\n    try {\r\n      if (!url) {\r\n        return\r\n      }\r\n      this.options.url = url\r\n      this.options.serverFetchStrategy = 'remote'\r\n      await this.init()\r\n    } catch (err) {\r\n      this._onError(err)\r\n      this.options.url = oldUrl\r\n      this.options.serverFetchStrategy = oldStrategy\r\n      await this.init()\r\n    }\r\n  }\r\n\r\n  _getToken() {\r\n    const { loginType } = this.options\r\n    this.token = this.options.token;\r\n    if (loginType === 'token') {\r\n      if (!this.token) {\r\n        throw new Error('Token login type expects the token option to be provided');\r\n      }\r\n    }\r\n  }\r\n  _getTabsSession() {\r\n    if (this.options.environment !== environments.BROWSER) {\r\n      return Promise.resolve()\r\n    }\r\n\r\n    if (!window.sessionStorage.length) {\r\n      // Ask other tabs for session storage\r\n      localStorage.setItem('getSessionStorage', Date.now());\r\n    }\r\n\r\n    window.addEventListener('storage', (event) => {\r\n      if (event.key === 'getSessionStorage') {\r\n        // Some tab asked for the sessionStorage -> send it\r\n        localStorage.setItem('sessionStorage', JSON.stringify(window.sessionStorage));\r\n        localStorage.removeItem('sessionStorage');\r\n      } else if (event.key === 'sessionStorage' && !sessionStorage.length) {\r\n        // sessionStorage is empty -> fill it\r\n        const data = JSON.parse(event.newValue)\r\n\r\n        for (let key in data) {\r\n          if (data.hasOwnProperty(key)) {\r\n            window.sessionStorage.setItem(key, data[key]);\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    return new Promise(resolve => setTimeout((resolve), 200))\r\n  }\r\n\r\n  /**\r\n   * Login (logs in based on the token/credentials provided)\r\n   * @param type (login type. Can be token/user/code/account)\r\n   * @return {Promise<void>}\r\n   */\r\n  login(type = 'token') {\r\n    // throttle login for 1 second\r\n    let payload = {\r\n      token: this.options.token,\r\n      email: this.options.email,\r\n      username: this.options.username,\r\n      password: this.options.password\r\n    }\r\n    let key = md5(JSON.stringify(payload))\r\n    const delay = 1000;\r\n\r\n    if (this._lastLoginTimestamp + delay > new Date().getTime()) {\r\n      return Promise.resolve()\r\n    }\r\n\r\n    this._lastLoginTimestamp = new Date().getTime()\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        let loginSession = window.sessionStorage.getItem(key);\r\n\r\n        if (loginSession) {\r\n          loginSession = JSON.parse(loginSession)\r\n          this.Logger.log('got data from session', loginSession);\r\n          await this._onLoginResponse(loginSession)\r\n          return resolve(loginSession);\r\n        }\r\n      } catch (err) {\r\n        this.Logger.log('Error on getting session', err)\r\n      }\r\n\r\n      try {\r\n        const url = getExternalLoginUrl(this.options.loginUrl, type)\r\n        const res = await externalLogin(url, payload)\r\n        await this._onLoginResponse(res)\r\n\r\n        if (this.options.environment === environments.BROWSER) {\r\n          window.sessionStorage.setItem(key, JSON.stringify(res));\r\n        }\r\n\r\n        resolve(res)\r\n      } catch (err) {\r\n        this.servers = this.argumentOptions.servers || defaultServers;\r\n        reject(err)\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default EventsSDK;\r\n","const version = '__VERSION__'\r\nimport sdk from './sdk'\r\nif (typeof window !== 'undefined') {\r\n  // Make it available on window\r\n  window.EventsSDK = sdk\r\n}\r\n\r\nexport default sdk\r\n"],"names":["LOGIN_STATUS","LOGIN","LOGIN_USER","LOGIN_CODE","LOGIN_ACCOUNT","LOGIN_RESPONSE","QUEUE_EVENT","QUEUES_UPDATED","DIALERS_UPDATED","EXTENSION_EVENT","EXTENSION_UPDATED","ALL_EXTENSION_STATUS","CONNECT","CONNECT_ERROR","CONNECT_TIMEOUT","DISCONNECT","PONG","RECONNECT","RECONNECT_ATTEMPT","RESYNC","RECONNECTING","RECONNECT_ERROR","RECONNECT_FAILED","KEEP_ALIVE","KEEP_ALIVE_RESPONSE","CLOSE","ERROR","ALL_DIALERS_STATUS","DIALER_EVENT","BROWSER","CHROME_EXTENSION","defaultServers","Logger","options","debug","message","data","toLog","JSON","stringify","now","Date","toUTCString","console","log","error","this","_log","_error","isObject","value","type","freeGlobal","global","Object","freeSelf","self","root","Function","reWhitespace","trimmedEndIndex","string","index","length","test","charAt","reTrimStart","baseTrim","slice","replace","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","getRawTag","isOwn","call","tag","unmasked","e","result","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","other","valueOf","isBinary","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","clearTimeout","cancel","flush","sdkEventReasons","NEWCALL","ANSWER","HANGUP","offlineEvents","eventTypes","isSocketOffline","event","name","includes","onNewEvent","eventData","store","extensionsModuleName","queuesModuleName","dialersModuleName","commit","dispatch","extensions","extension","reason","ivrid","ivruniqueid","extensionIndex","state","findIndex","userID","queues","queue","queueIndex","all","QueueID","dialers","dialer","dialerIndex","campaignID","callStatuses","CALLING","HOLD","ISRAEL_TIMEZONE_OFFSET","MINUTE","LOGOUT_STATUS","HOLD_STATUS","types","SET_EXTENSIONS","UPDATE_EXTENSIONS","SET_SERVER_TIME","SET_IS_SOCKET_OFFLINE","serverTime","serverDelta","serverOffset","offlineSocketTimestamp","mutations","splice","servertimeoffset","servertime","getTime","actions","setExtensions","updateExtension","isCallOnHold","status","callstatus","toLowerCase","answered","getters","isNaN","extensionsWithCalls","hideLoggedOutUsers","groupedExtensions","forEach","calls","filter","push","representativeStatus","extensionCountByStatus","el","namespaced","SET_QUEUES","UPDATE_QUEUES","setQueues","updateQueue","queueWithActiveCalls","Calls","allQueueCalls","allCalls","filterQueuesByIds","queueIds","Array","isArray","SET_DIALERS","UPDATE_DIALERS","setDialers","updateDialers","getAllDialers","getAllDialersWithTypeIVR","getAllDialersWithTypeAUTOMATIC","getServerWithHighestPriority","servers","chosenServer","maxPriority","Number","MAX_SAFE_INTEGER","server","Priority","isValidDate","date","async","externalLogin","url","email","password","token","username","body","pin","res","fetch","method","headers","json","Error","Data","Socket","getExternalLoginUrl","baseUrl","loginType","refreshToken","oldRefreshToken","loadBrowserScript","Promise","resolve","reject","script","document","createElement","src","onload","onerror","append","loadExtensionScript","text","eval","loadExternalScript","environment","getSocketIOFunction","environments","io","WINDOW","window","JS_MD5_NO_WINDOW","WEB_WORKER","NODE_JS","JS_MD5_NO_NODE_JS","process","versions","node","COMMON_JS","JS_MD5_NO_COMMON_JS","module","exports","ARRAY_BUFFER","JS_MD5_NO_ARRAY_BUFFER","ArrayBuffer","HEX_CHARS","split","EXTRA","SHIFT","OUTPUT_TYPES","BASE64_ENCODE_CHAR","blocks","buffer8","buffer","Uint8Array","Uint32Array","obj","JS_MD5_NO_ARRAY_BUFFER_IS_VIEW","isView","constructor","createOutputMethod","outputType","Md5","update","createMethod","nodeWrap","create","i","crypto","Buffer","nodeMethod","createHash","digest","sharedMemory","h0","h1","h2","h3","start","bytes","hBytes","finalized","hashed","first","notString","code","charCodeAt","lastByteIndex","hash","finalize","a","b","c","d","bc","da","hex","array","arrayBuffer","base64","v1","v2","v3","base64Str","md5","defaultOptions","fallbackServer","Domain","loginUrl","refreshTokenUrl","forceNew","reconnectionDelay","reconnectionDelayMax","maxReconnectAttempts","timeout","keepAliveTimeout","idleInterval","protocol","transports","upgrade","serverFetchStrategy","serverType","allConnections","listenersMap","Map","EventsSDK","argumentOptions","socket","connected","connectionEstablished","_lastEventTimestamp","_initReconnectOptions","_listenersMap","_retryConnection","_connect","bind","reconnectOptions","_lastLoginTimestamp","_handleLocalEvents","_registerExtensionsModule","_registerQueueModule","_registerDialerModule","emit","cache","moduleName","_validateStoreModule","registerModule","extensionsModule","queuesModule","dialersModule","unregisterModule","retryCount","minReconnectionDelay","maxReconnectionDelay","_initReconnectDelays","minReconnectDelay","err","newDelay","_typeof","errorCode","_initSocketConnection","Client","URL","URLList","map","Token","TokenExpiry","tokenExpiry","RefreshToken","_handleTokenExpiry","_this","_onLoginResponse","packet","skipLogin","serverToConnect","_findCurrentServer","_findNextAvailableServer","_findMaxPriorityServer","_initSocketEvents","_initKeepAlive","login","domain","closeAllConnections","reconnection","perMessageDeflate","query","on","_this2","_onReconnectAttempt","_onReconnectFailed","_onConnect","_onConnectTimeout","_onConnectError","_onError","_onDisconnect","onpacket","_onEvent","onevent","keepAliveInterval","clearInterval","setInterval","delta","_this3","getLastEventTimestamp","currentServerPriority","nextServerPriority","nextServer","find","maxPriorityServer","evt","_parsePacket","callback","eventName","eventHandler","_onKeepAlive","_reSync","_this4","handleStoreEvents","_getToken","_getTabsSession","_getServers","disconnect","init","connection","close","set","_checkInit","oldUrl","oldStrategy","sessionStorage","localStorage","setItem","addEventListener","key","removeItem","parse","newValue","payload","delay","loginSession","getItem","_this5","sdk"],"mappings":"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"}