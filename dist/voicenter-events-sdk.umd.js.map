{"version":3,"file":"voicenter-events-sdk.umd.js","sources":["../src/eventTypes.js","../src/config.js","../src/Logger.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../src/store/handleStoreEvents.js","../src/utils/statusTypes.js","../src/store/extensions.js","../src/store/queues.js","../src/utils.js","../node_modules/unfetch/dist/unfetch.module.js","../node_modules/node-fetch/lib/index.mjs","../node_modules/isomorphic-unfetch/index.js","../src/utils/externalLogin.js","../node_modules/js-md5/src/md5.js","../src/sdk.js"],"sourcesContent":["export default {\r\n  LOGIN_STATUS: 'loginStatus',\r\n  LOGIN: 'login',\r\n  LOGIN_USER: 'loginUser',\r\n  LOGIN_CODE: 'loginUserCode',\r\n  LOGIN_ACCOUNT: 'loginAccount',\r\n  LOGIN_RESPONSE: 'loginResponse',\r\n  QUEUE_EVENT: 'QueueEvent',\r\n  QUEUES_UPDATED: 'QueuesUpdated',\r\n  DIALERS_UPDATED: 'DialersUpdated',\r\n  EXTENSION_EVENT: 'ExtensionEvent',\r\n  EXTENSION_UPDATED: 'ExtensionsUpdated',\r\n  ALL_EXTENSION_STATUS: 'AllExtensionsStatus',\r\n  CONNECT: 'connect',\r\n  CONNECT_ERROR: 'connect_error',\r\n  CONNECT_TIMEOUT: 'connect_timeout',\r\n  DISCONNECT: 'disconnect',\r\n  PONG: 'pong',\r\n  RECONNECT: 'reconnect',\r\n  RECONNECT_ATTEMPT: 'reconnect_attempt',\r\n  RESYNC: 'resync',\r\n  RECONNECTING: 'reconnecting',\r\n  RECONNECT_ERROR: 'reconnect_error',\r\n  RECONNECT_FAILED: 'reconnect_failed',\r\n  KEEP_ALIVE: 'keepalive',\r\n  KEEP_ALIVE_RESPONSE: 'keepaliveResponse',\r\n  CLOSE: 'closeme',\r\n  ERROR: 'error',\r\n}\r\n","export const defaultServers = [{\r\n  'URLID': 59,\r\n  'Priority': 5,\r\n  'Version': 2,\r\n  'Domain': 'monitor1.voicenter.co'\r\n}, {\r\n  'URLID': 3,\r\n  'Priority': 4,\r\n  'Version': 2,\r\n  'Domain': 'monitor3.voicenter.co.il'\r\n}, {\r\n  'URLID': 4,\r\n  'Priority': 3,\r\n  'Version': 2,\r\n  'Domain': 'monitor4.voicenter.co.il'\r\n}, {\r\n  'URLID': 11,\r\n  'Priority': 2,\r\n  'Version': 2,\r\n  'Domain': 'monitor11.voicenter.co'\r\n}, {\r\n  'URLID': 5,\r\n  'Priority': 0,\r\n  'Version': 2,\r\n  'Domain': 'monitor5.voicenter.co.il'\r\n}];\r\n","\r\nclass Logger {\r\n  constructor(options = {}) {\r\n    this.debug = options.debug\r\n  }\r\n\r\n  /**\r\n   * Logs to console a colored message\r\n   * @param message\r\n   * @param data\r\n   * @private\r\n   */\r\n  _log(message, data) {\r\n    let toLog = data ? `${message}, %c Data -> ${JSON.stringify(data)}` : `${message}`\r\n    let now = new Date().toUTCString()\r\n    console.log(`%c ${now}: %c ${toLog}`, `color: #276749;`, `color: #4299e1;`, `color: #2c3e50;`)\r\n  }\r\n\r\n  /**\r\n   * Logs to console a colored message\r\n   * @param message\r\n   * @param data\r\n   * @private\r\n   */\r\n  _error(message, data) {\r\n    let toLog = data ? `${message}, Data -> ${JSON.stringify(data)}` : `${message}`\r\n    let now = new Date().toUTCString()\r\n    console.error(`${now}: ${toLog}`)\r\n  }\r\n\r\n  /**\r\n   * Logs messages in case debug mode is set\r\n   * @param message\r\n   * @param data\r\n   */\r\n  log(message, data) {\r\n    if (this.debug) {\r\n      if (message && !data) {\r\n        this._log(message)\r\n      } else {\r\n        this._log(message, data)\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Logs error messages in case debug mode is set\r\n   * @param message\r\n   * @param data\r\n   */\r\n  error(message, data) {\r\n    if (this.debug) {\r\n      if (message && !data) {\r\n        this._error(message)\r\n      } else {\r\n        this._error(message, data)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Logger\r\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import eventTypes from '../eventTypes';\r\n\r\nexport const sdkEventReasons = {\r\n  NEWCALL: 'NEWCALL',\r\n  ANSWER: 'ANSWER',\r\n  HANGUP: 'HANGUP'\r\n}\r\nconst offlineEvents = [\r\n  eventTypes.CONNECT_ERROR,\r\n  eventTypes.CONNECT_TIMEOUT,\r\n  eventTypes.DISCONNECT,\r\n  eventTypes.RECONNECT_ATTEMPT,\r\n  eventTypes.RECONNECTING,\r\n  eventTypes.RECONNECT_ERROR,\r\n  eventTypes.RECONNECT_FAILED,\r\n  sdkEventReasons.CLOSE\r\n]\r\n\r\nfunction isSocketOffline(event) {\r\n  let { name } = event\r\n  return offlineEvents.includes(name)\r\n}\r\n\r\nexport default function onNewEvent({ eventData, store, extensionsModuleName, queuesModuleName }) {\r\n  let { name, data } = eventData\r\n  store.commit(`${extensionsModuleName}/SET_IS_SOCKET_OFFLINE`, isSocketOffline(eventData))\r\n  switch (name) {\r\n    case eventTypes.ALL_EXTENSION_STATUS:\r\n      store.dispatch(`${extensionsModuleName}/setExtensions`, data.extensions)\r\n      break;\r\n    case eventTypes.EXTENSION_EVENT:\r\n      let extension = data.data\r\n      // Event reason: NEWCALL/ANSWER/HANGUP\r\n      extension['lastEvent'] = {\r\n        reason: data.reason,\r\n        ivrid: data.ivruniqueid\r\n      }\r\n      const extensions = store.state[extensionsModuleName].extensions\r\n      let extensionIndex = extensions.findIndex(e => e.userID === extension.userID)\r\n      if (extensionIndex !== -1) {\r\n        store.dispatch(`${extensionsModuleName}/updateExtension`, {\r\n          index: extensionIndex,\r\n          extension\r\n        })\r\n      }\r\n      break;\r\n    case eventTypes.LOGIN_STATUS:\r\n      store.commit(`${extensionsModuleName}/SET_SERVER_TIME`, data)\r\n      store.dispatch(`${queuesModuleName}/setQueues`, data.queues)\r\n      break;\r\n    case eventTypes.QUEUE_EVENT:\r\n      let queue = data.data;\r\n      const allQueues = store.state[queuesModuleName].all || []\r\n      let queueIndex = allQueues.findIndex(e => e.QueueID === queue.QueueID)\r\n      if (queueIndex !== -1) {\r\n        store.dispatch(`${queuesModuleName}/updateQueue`, {\r\n          index: queueIndex,\r\n          queue\r\n        })\r\n      }\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n","import colors from \"./colors\";\r\n\r\nexport const callStatuses = {\r\n  CALLING: 100,\r\n  HOLD: 101,\r\n}\r\n\r\nexport default {\r\n  1: {\r\n    icon: \"IconLogin\",\r\n    color: colors.LOGIN_COLOR,\r\n    text: 'status.login',\r\n    value: 1\r\n  },\r\n  2: {\r\n    icon: \"IconLogout\",\r\n    color: colors.LOGOUT_COLOR,\r\n    text: 'status.logout',\r\n    value: 2\r\n  },\r\n  3: {\r\n    icon: \"IconLunch\",\r\n    color: colors.LUNCH_COLOR,\r\n    text: 'status.lunch',\r\n    value: 3\r\n  },\r\n  5: {\r\n    icon: \"IconAdministrative\",\r\n    color: colors.ADMINISTRATIVE_COLOR,\r\n    text: 'status.administrative',\r\n    value: 5\r\n  },\r\n  7: {\r\n    icon: \"IconPrivate\",\r\n    color: colors.PRIVATE_COLOR,\r\n    text: 'status.private',\r\n    value: 7\r\n  },\r\n  9: {\r\n    icon: \"IconOther\",\r\n    color: colors.OTHER_COLOR,\r\n    text: 'status.other',\r\n    value: 9\r\n  },\r\n  11: {\r\n    icon: \"IconTraining\",\r\n    color: colors.TRAINING_COLOR,\r\n    text: 'status.training',\r\n    value: 11\r\n  },\r\n  12: {\r\n    icon: \"IconTeamMeeting\",\r\n    color: colors.TEAM_MEETING_COLOR,\r\n    text: 'status.teamMeeting',\r\n    value: 12\r\n  },\r\n  13: {\r\n    icon: \"IconBrief\",\r\n    color: colors.BRIEF_COLOR,\r\n    text: 'status.brief',\r\n    value: 13\r\n  },\r\n  100: {\r\n    icon: 'IconIncomingCall',\r\n    color: colors.LIGHT_GREEN,\r\n    text: 'status.incall',\r\n    value: 100\r\n  },\r\n  101: {\r\n    icon: 'IconHold',\r\n    color: colors.HOLD_COLOR,\r\n    text: 'status.hold',\r\n    value: 101\r\n  }\r\n}\r\n","import { callStatuses } from '../utils/statusTypes';\r\n\r\nconst ISRAEL_TIMEZONE_OFFSET = 180 * 60 * 1000;\r\nconst MINUTE = 60 * 1000\r\nconst LOGOUT_STATUS = 2;\r\nconst LOGIN_STATUS = 1;\r\nconst HOLD_STATUS = 'hold'\r\n\r\nconst types = {\r\n    SET_EXTENSIONS: 'SET_EXTENSIONS',\r\n    UPDATE_EXTENSIONS: 'UPDATE_EXTENSIONS',\r\n    SET_SERVER_TIME: 'SET_SERVER_TIME',\r\n    SET_IS_SOCKET_OFFLINE: 'SET_IS_SOCKET_OFFLINE',\r\n};\r\nconst state = {\r\n    extensions: [],\r\n    serverTime: null,\r\n    serverDelta: 0,\r\n    serverOffset: 0,\r\n    isSocketOffline: false,\r\n    offlineSocketTimestamp: null\r\n};\r\n\r\nconst mutations = {\r\n    [types.SET_EXTENSIONS]: (state, value) => {\r\n        state.extensions = value\r\n    },\r\n    [types.UPDATE_EXTENSIONS]: (state, {index, extension}) => {\r\n        state.extensions.splice(index, 1, extension)\r\n    },\r\n    [types.SET_SERVER_TIME]: (state, value) => {\r\n        state.serverOffset = value.servertimeoffset * 60 * 1000 || ISRAEL_TIMEZONE_OFFSET\r\n        state.serverTime = value.servertime * 1000 - state.serverOffset\r\n        state.serverDelta = new Date().getTime() - state.serverTime\r\n    },\r\n    [types.SET_IS_SOCKET_OFFLINE]: (state, value) => {\r\n        state.isSocketOffline = value\r\n        if (value) {\r\n            state.offlineSocketTimestamp = new Date().getTime()\r\n        } else {\r\n            state.offlineSocketTimestamp = null\r\n        }\r\n    }\r\n};\r\n\r\nconst actions = {\r\n    async setExtensions({commit}, value) {\r\n        commit(types.SET_EXTENSIONS, value)\r\n    },\r\n    async updateExtension({commit}, value) {\r\n        commit(types.UPDATE_EXTENSIONS, value)\r\n    },\r\n};\r\n\r\nfunction isCallOnHold(call = {}) {\r\n  let status = call.callstatus || ''\r\n  status = status.toLowerCase()\r\n  return call.answered && status === HOLD_STATUS\r\n}\r\n\r\nconst getters = {\r\n  isSocketOffline: state => {\r\n    if (!state.offlineSocketTimestamp || isNaN(state.offlineSocketTimestamp)) {\r\n      return false\r\n    }\r\n    const now = new Date().getTime()\r\n    // show after 1 minute of disconnect\r\n    return state.isSocketOffline && now - state.offlineSocketTimestamp > MINUTE\r\n  },\r\n  extensionsWithCalls: state => hideLoggedOutUsers => {\r\n    let groupedExtensions = [];\r\n\r\n    state.extensions.forEach((extension) => {\r\n\r\n      if (extension.calls.length > 0) {\r\n        if (extension.calls.filter(isCallOnHold).length) {\r\n          extension['representativeStatus'] = callStatuses.HOLD;\r\n        } else {\r\n          extension['representativeStatus'] = callStatuses.CALLING;\r\n        }\r\n      }\r\n      groupedExtensions.push(extension);\r\n    });\r\n\r\n    if (hideLoggedOutUsers) {\r\n      return groupedExtensions.filter(e => e.representativeStatus !== LOGOUT_STATUS);\r\n    }\r\n    return groupedExtensions;\r\n  },\r\n  extensionCountByStatus: (state, getters) => status => {\r\n    return getters.extensionsWithCalls.filter(el => el.representativeStatus === status).length || 0\r\n  }\r\n}\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getters,\r\n};\r\n","const types = {\r\n    SET_QUEUES: 'SET_QUEUES',\r\n    UPDATE_QUEUES: 'UPDATE_QUEUES',\r\n}\r\nconst state = {\r\n    all: [],\r\n}\r\n\r\nconst mutations = {\r\n    [types.SET_QUEUES]: (state, value) => {\r\n        state.all = value\r\n    },\r\n    [types.UPDATE_QUEUES]: (state, {index, queue}) => {\r\n        state.all.splice(index, 1, queue)\r\n    },\r\n}\r\n\r\nconst actions = {\r\n    async setQueues({commit}, value) {\r\n        commit(types.SET_QUEUES, value)\r\n    },\r\n    async updateQueue({commit}, value) {\r\n        commit(types.UPDATE_QUEUES, value)\r\n    },\r\n}\r\n\r\nconst getters = {\r\n  queueWithActiveCalls: (state) => {\r\n    return state.all.filter((el) => el.Calls.length)\r\n  },\r\n  allQueueCalls: (state, getters) => {\r\n    const allCalls = []\r\n    getters.queueWithActiveCalls.forEach((queue) => {\r\n      const calls = queue.Calls || []\r\n      allCalls.push(...calls)\r\n    })\r\n    return allCalls\r\n  },\r\n  filterQueuesByIds: (state) => queueIds => {\r\n    if (!queueIds || !Array.isArray(queueIds)) {\r\n      return state.all\r\n    }\r\n    return state.all.filter(e => queueIds.includes(e.QueueID))\r\n  }\r\n}\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getters,\r\n}\r\n","export function getServerWithHighestPriority(servers) {\r\n  // Highest priority server is the one with lowest Priority value\r\n  let chosenServer = null\r\n  let maxPriority = Number.MAX_SAFE_INTEGER\r\n  servers.forEach(server => {\r\n    if (server.Priority < maxPriority) {\r\n      maxPriority = server.Priority\r\n      chosenServer = server\r\n    }\r\n  })\r\n  return chosenServer\r\n}\r\n\r\nexport function isValidDate(date) {\r\n  return !isNaN(date.getTime())\r\n}\r\n","export default function(e,n){return n=n||{},new Promise(function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||\"get\",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+\",\"+t:t}),t(a())},s.onerror=r,s.withCredentials=\"include\"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)})}\n//# sourceMappingURL=unfetch.module.js.map\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","function r(m){return m && m.default || m;}\nmodule.exports = global.fetch = global.fetch || (\n\ttypeof process=='undefined' ? r(require('unfetch')) : (function(url, opts) {\n\t\treturn r(require('node-fetch'))(String(url).replace(/^\\/\\//g,'https://'), opts);\n\t})\n);\n","import fetch from 'isomorphic-unfetch';\n\nexport async function externalLogin(url, { email, password, token, username }) {\n  let body = null\n  if (token) {\n    body = JSON.stringify({ token })\n  } else if (username) {\n    body = JSON.stringify({\n      username,\n      password\n    })\n  } else {\n    body = JSON.stringify({\n      email,\n      pin: password\n    })\n  }\n  const res = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body,\n  });\n  const data = await res.json();\n  if (data.error) {\n    throw new Error(data.error)\n  }\n  return data.Data.Socket;\n}\n\nexport function getExternalLoginUrl(baseUrl, loginType) {\n  if (loginType === 'user') {\n    return `${baseUrl}/User`\n  } else if (loginType === 'token') {\n    return `${baseUrl}/Token`\n  } else if (loginType === 'account') {\n    return `${baseUrl}/Account`\n  }\n  return baseUrl\n}\n\nexport async function refreshToken(url, oldRefreshToken) {\n  const res = await fetch(url, {\n    method: 'GET',\n\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${oldRefreshToken}`\n    }\n  });\n  return res.json();\n}\n","/**\n * [js-md5]{@link https://github.com/emn178/js-md5}\n *\n * @namespace md5\n * @version 0.7.3\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_MD5_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_MD5_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_MD5_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_MD5_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [128, 32768, 8388608, -2147483648];\n  var SHIFT = [0, 8, 16, 24];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'buffer', 'arrayBuffer', 'base64'];\n  var BASE64_ENCODE_CHAR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n  var blocks = [], buffer8;\n  if (ARRAY_BUFFER) {\n    var buffer = new ArrayBuffer(68);\n    buffer8 = new Uint8Array(buffer);\n    blocks = new Uint32Array(buffer);\n  }\n\n  if (root.JS_MD5_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  /**\n   * @method hex\n   * @memberof md5\n   * @description Output hash as hex string\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {String} Hex string\n   * @example\n   * md5.hex('The quick brown fox jumps over the lazy dog');\n   * // equal to\n   * md5('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method digest\n   * @memberof md5\n   * @description Output hash as bytes array\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Array} Bytes array\n   * @example\n   * md5.digest('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method array\n   * @memberof md5\n   * @description Output hash as bytes array\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Array} Bytes array\n   * @example\n   * md5.array('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method arrayBuffer\n   * @memberof md5\n   * @description Output hash as ArrayBuffer\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @example\n   * md5.arrayBuffer('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method buffer\n   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n   * @memberof md5\n   * @description Output hash as ArrayBuffer\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @example\n   * md5.buffer('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method base64\n   * @memberof md5\n   * @description Output hash as base64 string\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {String} base64 string\n   * @example\n   * md5.base64('The quick brown fox jumps over the lazy dog');\n   */\n  var createOutputMethod = function (outputType) {\n    return function (message) {\n      return new Md5(true).update(message)[outputType]();\n    };\n  };\n\n  /**\n   * @method create\n   * @memberof md5\n   * @description Create Md5 object\n   * @returns {Md5} Md5 object.\n   * @example\n   * var hash = md5.create();\n   */\n  /**\n   * @method update\n   * @memberof md5\n   * @description Create and update Md5 object\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Md5} Md5 object.\n   * @example\n   * var hash = md5.update('The quick brown fox jumps over the lazy dog');\n   * // equal to\n   * var hash = md5.create();\n   * hash.update('The quick brown fox jumps over the lazy dog');\n   */\n  var createMethod = function () {\n    var method = createOutputMethod('hex');\n    if (NODE_JS) {\n      method = nodeWrap(method);\n    }\n    method.create = function () {\n      return new Md5();\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash('md5').update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw ERROR;\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash('md5').update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  /**\n   * Md5 class\n   * @class Md5\n   * @description This is internal class.\n   * @see {@link md5.create}\n   */\n  function Md5(sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n      this.buffer8 = buffer8;\n    } else {\n      if (ARRAY_BUFFER) {\n        var buffer = new ArrayBuffer(68);\n        this.buffer8 = new Uint8Array(buffer);\n        this.blocks = new Uint32Array(buffer);\n      } else {\n        this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n      }\n    }\n    this.h0 = this.h1 = this.h2 = this.h3 = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n  }\n\n  /**\n   * @method update\n   * @memberof Md5\n   * @instance\n   * @description Update hash\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Md5} Md5 object.\n   * @see {@link md5.update}\n   */\n  Md5.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw ERROR;\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw ERROR;\n          }\n        }\n      } else {\n        throw ERROR;\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n    var buffer8 = this.buffer8;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = blocks[16];\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        if (ARRAY_BUFFER) {\n          for (i = this.start; index < length && i < 64; ++index) {\n            buffer8[i++] = message[index];\n          }\n        } else {\n          for (i = this.start; index < length && i < 64; ++index) {\n            blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n          }\n        }\n      } else {\n        if (ARRAY_BUFFER) {\n          for (i = this.start; index < length && i < 64; ++index) {\n            code = message.charCodeAt(index);\n            if (code < 0x80) {\n              buffer8[i++] = code;\n            } else if (code < 0x800) {\n              buffer8[i++] = 0xc0 | (code >> 6);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            } else if (code < 0xd800 || code >= 0xe000) {\n              buffer8[i++] = 0xe0 | (code >> 12);\n              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            } else {\n              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n              buffer8[i++] = 0xf0 | (code >> 18);\n              buffer8[i++] = 0x80 | ((code >> 12) & 0x3f);\n              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            }\n          }\n        } else {\n          for (i = this.start; index < length && i < 64; ++index) {\n            code = message.charCodeAt(index);\n            if (code < 0x80) {\n              blocks[i >> 2] |= code << SHIFT[i++ & 3];\n            } else if (code < 0x800) {\n              blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            } else if (code < 0xd800 || code >= 0xe000) {\n              blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            } else {\n              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n              blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            }\n          }\n        }\n      }\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Md5.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = blocks[16];\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.bytes << 3;\n    blocks[15] = this.hBytes << 3 | this.bytes >>> 29;\n    this.hash();\n  };\n\n  Md5.prototype.hash = function () {\n    var a, b, c, d, bc, da, blocks = this.blocks;\n\n    if (this.first) {\n      a = blocks[0] - 680876937;\n      a = (a << 7 | a >>> 25) - 271733879 << 0;\n      d = (-1732584194 ^ a & 2004318071) + blocks[1] - 117830708;\n      d = (d << 12 | d >>> 20) + a << 0;\n      c = (-271733879 ^ (d & (a ^ -271733879))) + blocks[2] - 1126478375;\n      c = (c << 17 | c >>> 15) + d << 0;\n      b = (a ^ (c & (d ^ a))) + blocks[3] - 1316259209;\n      b = (b << 22 | b >>> 10) + c << 0;\n    } else {\n      a = this.h0;\n      b = this.h1;\n      c = this.h2;\n      d = this.h3;\n      a += (d ^ (b & (c ^ d))) + blocks[0] - 680876936;\n      a = (a << 7 | a >>> 25) + b << 0;\n      d += (c ^ (a & (b ^ c))) + blocks[1] - 389564586;\n      d = (d << 12 | d >>> 20) + a << 0;\n      c += (b ^ (d & (a ^ b))) + blocks[2] + 606105819;\n      c = (c << 17 | c >>> 15) + d << 0;\n      b += (a ^ (c & (d ^ a))) + blocks[3] - 1044525330;\n      b = (b << 22 | b >>> 10) + c << 0;\n    }\n\n    a += (d ^ (b & (c ^ d))) + blocks[4] - 176418897;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[5] + 1200080426;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[6] - 1473231341;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[7] - 45705983;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (d ^ (b & (c ^ d))) + blocks[8] + 1770035416;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[9] - 1958414417;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[10] - 42063;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[11] - 1990404162;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (d ^ (b & (c ^ d))) + blocks[12] + 1804603682;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[13] - 40341101;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[14] - 1502002290;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[15] + 1236535329;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[1] - 165796510;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[6] - 1069501632;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[11] + 643717713;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[0] - 373897302;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[5] - 701558691;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[10] + 38016083;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[15] - 660478335;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[4] - 405537848;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[9] + 568446438;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[14] - 1019803690;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[3] - 187363961;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[8] + 1163531501;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[13] - 1444681467;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[2] - 51403784;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[7] + 1735328473;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[12] - 1926607734;\n    b = (b << 20 | b >>> 12) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[5] - 378558;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[8] - 2022574463;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[11] + 1839030562;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[14] - 35309556;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[1] - 1530992060;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[4] + 1272893353;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[7] - 155497632;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[10] - 1094730640;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[13] + 681279174;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[0] - 358537222;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[3] - 722521979;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[6] + 76029189;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[9] - 640364487;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[12] - 421815835;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[15] + 530742520;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[2] - 995338651;\n    b = (b << 23 | b >>> 9) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[0] - 198630844;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[7] + 1126891415;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[14] - 1416354905;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[5] - 57434055;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[12] + 1700485571;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[3] - 1894986606;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[10] - 1051523;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[1] - 2054922799;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[8] + 1873313359;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[15] - 30611744;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[6] - 1560198380;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[13] + 1309151649;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[4] - 145523070;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[11] - 1120210379;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[2] + 718787259;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[9] - 343485551;\n    b = (b << 21 | b >>> 11) + c << 0;\n\n    if (this.first) {\n      this.h0 = a + 1732584193 << 0;\n      this.h1 = b - 271733879 << 0;\n      this.h2 = c - 1732584194 << 0;\n      this.h3 = d + 271733878 << 0;\n      this.first = false;\n    } else {\n      this.h0 = this.h0 + a << 0;\n      this.h1 = this.h1 + b << 0;\n      this.h2 = this.h2 + c << 0;\n      this.h3 = this.h3 + d << 0;\n    }\n  };\n\n  /**\n   * @method hex\n   * @memberof Md5\n   * @instance\n   * @description Output hash as hex string\n   * @returns {String} Hex string\n   * @see {@link md5.hex}\n   * @example\n   * hash.hex();\n   */\n  Md5.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;\n\n    return HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F];\n  };\n\n  /**\n   * @method toString\n   * @memberof Md5\n   * @instance\n   * @description Output hash as hex string\n   * @returns {String} Hex string\n   * @see {@link md5.hex}\n   * @example\n   * hash.toString();\n   */\n  Md5.prototype.toString = Md5.prototype.hex;\n\n  /**\n   * @method digest\n   * @memberof Md5\n   * @instance\n   * @description Output hash as bytes array\n   * @returns {Array} Bytes array\n   * @see {@link md5.digest}\n   * @example\n   * hash.digest();\n   */\n  Md5.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;\n    return [\n      h0 & 0xFF, (h0 >> 8) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 24) & 0xFF,\n      h1 & 0xFF, (h1 >> 8) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 24) & 0xFF,\n      h2 & 0xFF, (h2 >> 8) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 24) & 0xFF,\n      h3 & 0xFF, (h3 >> 8) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 24) & 0xFF\n    ];\n  };\n\n  /**\n   * @method array\n   * @memberof Md5\n   * @instance\n   * @description Output hash as bytes array\n   * @returns {Array} Bytes array\n   * @see {@link md5.array}\n   * @example\n   * hash.array();\n   */\n  Md5.prototype.array = Md5.prototype.digest;\n\n  /**\n   * @method arrayBuffer\n   * @memberof Md5\n   * @instance\n   * @description Output hash as ArrayBuffer\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @see {@link md5.arrayBuffer}\n   * @example\n   * hash.arrayBuffer();\n   */\n  Md5.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(16);\n    var blocks = new Uint32Array(buffer);\n    blocks[0] = this.h0;\n    blocks[1] = this.h1;\n    blocks[2] = this.h2;\n    blocks[3] = this.h3;\n    return buffer;\n  };\n\n  /**\n   * @method buffer\n   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n   * @memberof Md5\n   * @instance\n   * @description Output hash as ArrayBuffer\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @see {@link md5.buffer}\n   * @example\n   * hash.buffer();\n   */\n  Md5.prototype.buffer = Md5.prototype.arrayBuffer;\n\n  /**\n   * @method base64\n   * @memberof Md5\n   * @instance\n   * @description Output hash as base64 string\n   * @returns {String} base64 string\n   * @see {@link md5.base64}\n   * @example\n   * hash.base64();\n   */\n  Md5.prototype.base64 = function () {\n    var v1, v2, v3, base64Str = '', bytes = this.array();\n    for (var i = 0; i < 15;) {\n      v1 = bytes[i++];\n      v2 = bytes[i++];\n      v3 = bytes[i++];\n      base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] +\n        BASE64_ENCODE_CHAR[(v1 << 4 | v2 >>> 4) & 63] +\n        BASE64_ENCODE_CHAR[(v2 << 2 | v3 >>> 6) & 63] +\n        BASE64_ENCODE_CHAR[v3 & 63];\n    }\n    v1 = bytes[i];\n    base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] +\n      BASE64_ENCODE_CHAR[(v1 << 4) & 63] +\n      '==';\n    return base64Str;\n  };\n\n  var exports = createMethod();\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    /**\n     * @method md5\b\n     * @description Md5 hash function, export to global in browsers.\n     * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n     * @returns {String} md5 hashes\n     * @example\n     * md5(''); // d41d8cd98f00b204e9800998ecf8427e\n     * md5('The quick brown fox jumps over the lazy dog'); // 9e107d9d372bb6826bd81d3542a419d6\n     * md5('The quick brown fox jumps over the lazy dog.'); // e4d909c290d0fb1ca068ffaddf22cbd0\n     *\n     * // It also supports UTF-8 encoding\n     * md5(''); // a7bac2239fcdcb3a067903d8077c4a07\n     *\n     * // It also supports byte `Array`, `Uint8Array`, `ArrayBuffer`\n     * md5([]); // d41d8cd98f00b204e9800998ecf8427e\n     * md5(new Uint8Array([])); // d41d8cd98f00b204e9800998ecf8427e\n     */\n    root.md5 = exports;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","import io from 'socket.io-client';\nimport eventTypes from './eventTypes';\nimport { defaultServers } from './config';\nimport Logger from './Logger';\nimport debounce from 'lodash/debounce'\nimport handleStoreEvents from './store/handleStoreEvents'\nimport extensionsModule from './store/extensions'\nimport queuesModule from './store/queues'\nimport { getServerWithHighestPriority, isValidDate } from './utils';\nimport { externalLogin, refreshToken, getExternalLoginUrl } from './utils/externalLogin';\n// import { loadExternalScript } from './utils/loadExternalScript'\nimport md5 from \"js-md5\";\n\nconst defaultOptions = {\n  url: `https://monitorapi.voicenter.co.il/monitorAPI/getMonitorUrls`,\n  fallbackServer: {\n    Domain: 'monitor5.voicenter.co.il',\n    Priority: 0,\n  },\n  loginUrl: 'https://loginapi.voicenter.co.il/monitorAPI/Login',\n  refreshTokenUrl: 'https://loginapi.voicenter.co.il/monitorAPI/RefreshIdentityToken',\n  servers: defaultServers,\n  token: null,\n  loginType: 'token',\n  forceNew: true,\n  reconnectionDelay: 10000,\n  reconnectionDelayMax: 10000,\n  maxReconnectAttempts: 2,\n  timeout: 10000,\n  keepAliveTimeout: 60000,\n  idleInterval: 60000 * 5, // 5 minutes\n  protocol: 'https',\n  transports: ['websocket'],\n  upgrade: false,\n  store: null,\n  extensionsModuleName: 'sdkExtensions',\n  queuesModuleName: 'sdkQueues',\n  serverFetchStrategy: 'remote', // get servers from external url options: remote | static\n  serverType: null, // can be 1 or 2. 2 is used for chrome extension\n};\n\nlet allConnections = [];\nlet listenersMap = new Map();\n\nclass EventsSDK {\n  constructor(options = {}) {\n    this.options = {\n      ...defaultOptions,\n      ...options,\n    };\n    this.argumentOptions = {\n      ...options\n    }\n    if (!this.options.loginType) {\n      throw new Error('A login type should be provided');\n    }\n    this.Logger = new Logger(this.options);\n    this.servers = [];\n    this.server = null;\n    this.socket = null;\n    this.connected = false;\n    this.connectionEstablished = false;\n    this._lastEventTimestamp = new Date().getTime();\n    this._initReconnectOptions();\n    this._listenersMap = listenersMap;\n    this._retryConnection = debounce(this._connect.bind(this), this.reconnectOptions.reconnectionDelay, {\n      leading: true,\n      trailing: false\n    });\n    this._lastLoginTimestamp = null;\n    this._handleLocalEvents = false;\n    this._registerExtensionsModule();\n    this._registerQueueModule();\n  }\n\n  getLastEventTimestamp() {\n    return this._lastEventTimestamp\n  }\n  _reSync () {\n    this.emit(eventTypes.RESYNC, {\n      cache: false\n    });\n  }\n  _registerExtensionsModule() {\n    const moduleName = this.options.extensionsModuleName || 'sdkExtensions'\n    if (!this._validateStoreModule(moduleName)) {\n      return\n    }\n    this.options.store.registerModule(moduleName, extensionsModule)\n    this._handleLocalEvents = true\n  }\n\n  _registerQueueModule() {\n    const moduleName = this.options.queuesModuleName || 'sdkQueues'\n    if (!this._validateStoreModule(moduleName)) {\n      return\n    }\n    this.options.store.registerModule(moduleName, queuesModule)\n    this._handleLocalEvents = true\n  }\n\n  _validateStoreModule(moduleName) {\n    const { store } = this.options\n    if (!store) {\n      return false\n    }\n    if (store.state[moduleName]) {\n      store.unregisterModule(moduleName)\n    }\n    return true\n  }\n\n  _initReconnectOptions() {\n    this.reconnectOptions = {\n      retryCount: 1,\n      maxReconnectAttempts: this.options.maxReconnectAttempts,\n      reconnectionDelay: this.options.reconnectionDelay, // 10 seconds. After each re-connection attempt this number will increase (minReconnectionDelay * attempts) => 10, 20, 30, 40 seconds ... up to 5min\n      minReconnectionDelay: this.options.reconnectionDelay, // 10 seconds\n      maxReconnectionDelay: 60000 * 5 // 5 minutes\n    }\n  }\n\n  _onConnect() {\n    this._initReconnectDelays();\n    this.connected = true;\n    this.Logger.log(eventTypes.CONNECT, this.reconnectOptions);\n  }\n\n  _initReconnectDelays() {\n    this.reconnectOptions.retryCount = 1;\n    let minReconnectDelay = this.reconnectOptions.minReconnectionDelay;\n    this.reconnectOptions.reconnectionDelay = minReconnectDelay;\n    this.socket.io.reconnectionDelay(minReconnectDelay);\n    this.socket.io.reconnectionDelayMax(minReconnectDelay);\n  }\n\n  _onConnectError(data) {\n    this._retryConnection('next');\n    this.connected = false;\n    this.Logger.log(eventTypes.CONNECT_ERROR, data)\n  }\n\n  _onError(err) {\n    this.Logger.log(eventTypes.ERROR, err);\n  }\n\n  _onReconnectFailed() {\n    this._retryConnection('next');\n    this.Logger.log(eventTypes.RECONNECT_FAILED, this.reconnectOptions);\n  }\n\n  _onConnectTimeout() {\n    this._retryConnection('next');\n    this.Logger.log(eventTypes.CONNECT_TIMEOUT, this.reconnectOptions)\n  }\n\n  _onReconnectAttempt() {\n    if (this.reconnectOptions.retryCount >= this.reconnectOptions.maxReconnectAttempts) {\n      this._retryConnection('next');\n      return;\n    }\n    if (this.reconnectOptions.reconnectionDelay < this.reconnectOptions.maxReconnectionDelay) {\n      let newDelay = this.reconnectOptions.minReconnectionDelay * this.reconnectOptions.retryCount;\n      this.reconnectOptions.reconnectionDelay = newDelay;\n      this.socket.io.reconnectionDelay(newDelay);\n      this.socket.io.reconnectionDelayMax(newDelay);\n    }\n    this.reconnectOptions.retryCount++;\n    this.Logger.log(eventTypes.RECONNECT_ATTEMPT, this.reconnectOptions)\n  }\n\n  _onDisconnect(reason) {\n    this.connected = false;\n    this.Logger.log(eventTypes.DISCONNECT, reason);\n    this._connect('next')\n  }\n\n  _onKeepAlive(data) {\n    if (typeof data === 'object' && data.errorCode !== 0) {\n      this._initSocketConnection();\n      return\n    }\n    if (data && this.connected) {\n      this.Logger.log(eventTypes.KEEP_ALIVE_RESPONSE);\n      this._lastEventTimestamp = new Date().getTime()\n    } else {\n      this._initSocketConnection();\n    }\n  }\n\n  async _onLoginResponse(data) {\n    // if (data.Client) {\n    //   await loadExternalScript(data.Client)\n    // }\n    if (data.URL) {\n      this.server = {\n        Priority: 0,\n        Domain: data.URL.replace('https://', '')\n      }\n    }\n    if (data.URLList && Array.isArray(data.URLList)) {\n      this.servers = data.URLList.map((url, index) => {\n        return {\n          Priority: index,\n          Domain: url.replace('https://', '')\n        }\n      })\n    }\n    if (data.Token) {\n      this.options.token = data.Token;\n      this.token = data.Token\n      await this._connect('default', true)\n    }\n\n    if (data.RefreshToken) {\n      this.options.refreshToken = data.RefreshToken\n      this._handleTokenExpiry()\n    }\n    if (data.TokenExpiry) {\n      this.options.tokenExpiry = data.TokenExpiry\n    }\n  }\n\n  _handleTokenExpiry() {\n    const date = new Date(this.options.tokenExpiry)\n    if (!isValidDate(date)) {\n      return\n    }\n    const timeout = date.getTime() - new Date().getTime() - 5000 // 5 seconds before expire\n    setTimeout(async () => {\n      const res = await refreshToken(this.options.refreshTokenUrl, this.options.refreshToken)\n      await this._onLoginResponse(res)\n    }, timeout)\n  }\n\n  _parsePacket(packet) {\n    if (!packet.data) {\n      return {};\n    }\n    let name = packet.data[0];\n    let data = packet.data[1];\n    return {\n      name,\n      data\n    };\n  }\n\n  async _connect(server = 'default', skipLogin = false) {\n    let serverToConnect = null;\n    if (server === 'default') {\n      serverToConnect = this._findCurrentServer();\n    } else if (server === 'next') {\n      serverToConnect = this._findNextAvailableServer()\n    } else if (server === 'prev') {\n      serverToConnect = this._findMaxPriorityServer()\n    } else {\n      throw new Error(`Incorrect 'server' parameter passed to connect function ${server}. Should be 'default' or 'next'`)\n    }\n    if (!serverToConnect) {\n      this.server = this._findCurrentServer();\n    }\n    this._initSocketConnection();\n    this._initSocketEvents();\n    this._initKeepAlive();\n    this._initReconnectDelays();\n    if (skipLogin) {\n      return\n    }\n    await this.login(this.options.loginType)\n  }\n\n  _checkInit() {\n    if (!this.connectionEstablished) {\n      throw new Error('Make sure you call \"sdk.init()\" before doing other operations.')\n    }\n  }\n\n  _initSocketConnection() {\n    let domain = this.server.Domain;\n    let protocol = this.options.protocol;\n    let url = `${protocol}://${domain}`;\n    this.Logger.log('Connecting to..', url);\n    this.closeAllConnections();\n    const options = {\n      ...this.options,\n      debug: false\n    }\n    if (this.token) {\n      options.query = {\n        token: this.token\n      }\n    }\n    // if(window) {\n    //   this.socket = window.io(url, options);\n    // } else {\n      this.socket = io(url,options);\n    // }\n    allConnections.push(this.socket);\n    this.connectionEstablished = true;\n  }\n\n  _initSocketEvents() {\n    this.socket.onevent = this._onEvent.bind(this)\n  }\n\n  _initKeepAlive() {\n    if (this.keepAliveInterval) {\n      clearInterval(this.keepAliveInterval)\n    }\n\n    if (this.idleInterval) {\n      clearInterval((this.idleInterval))\n    }\n    this.keepAliveInterval = setInterval(async () => {\n      const now = new Date().getTime()\n      const delta = this.options.keepAliveTimeout * 2\n\n      if (now > this.getLastEventTimestamp() + delta) {\n        await this._connect('next', true)\n        return\n      }\n      if (!this.socket) {\n        this._initSocketConnection();\n        return\n      }\n      if (now > this.getLastEventTimestamp() + this.options.keepAliveTimeout) {\n        this.emit(eventTypes.KEEP_ALIVE, this.options.token);\n      }\n\n    }, this.options.keepAliveTimeout);\n\n    this.idleInterval = setInterval(() => {\n      this.reSync(false)\n    }, this.options.idleInterval)\n  }\n\n  _findCurrentServer() {\n    let server = null;\n    if (this.servers.length) {\n      server = this.servers[0];\n    }\n    this.server = server;\n    if (!this.server) {\n      this.server = this.options.fallbackServer\n    }\n    return this.server;\n  }\n\n  _findNextAvailableServer() {\n    let currentServerPriority = this.server.Priority;\n    this.Logger.log(`Failover -> Trying to find another server`);\n    if (currentServerPriority === this.servers.length - 1) {\n      return this._findMaxPriorityServer()\n    }\n    let nextServerPriority = currentServerPriority + 1\n    let nextServer = this.servers.find(server => server.Priority === nextServerPriority);\n    if (!nextServer) {\n      nextServer = this._findMaxPriorityServer();\n      if (!nextServer) {\n        return\n      }\n    }\n    if (this.server.Domain !== nextServer.Domain) {\n      this.server = nextServer;\n      return this.server\n    }\n    this.Logger.log(`Failover -> Found new server. Connecting to it...`, this.server);\n    return null\n  }\n\n  _findMaxPriorityServer() {\n    this.Logger.log(`Fallback -> Trying to find previous server`, '_findMaxPriorityServer');\n    let maxPriorityServer = getServerWithHighestPriority(this.servers);\n    if (!this.server) {\n      this.server = maxPriorityServer;\n      return this.server\n    }\n    if (this.server && maxPriorityServer.Domain !== this.server.Domain) {\n      this.server = maxPriorityServer;\n      this.Logger.log(`Fallback -> Trying to find previous server`, this.server);\n      return this.server\n    }\n    return null\n  }\n\n  async _getServers() {\n    // Ignore server fetch if we have a list of servers passed via options\n    if (this.options.serverFetchStrategy === 'static' && this.argumentOptions.servers && Array.isArray(this.argumentOptions.servers) && this.argumentOptions.servers.length > 1) {\n      this.servers = this.argumentOptions.servers\n    }\n  }\n\n  _onEvent(packet) {\n    if (!packet.data) {\n      return;\n    }\n    let evt = this._parsePacket(packet);\n    this.Logger.log(`New event -> ${evt.name}`, evt);\n    this._lastEventTimestamp = new Date().getTime()\n    this._listenersMap.forEach((callback, eventName) => {\n      if (eventName === '*') {\n        callback(evt);\n      } else if (evt.name === eventName) {\n        callback(evt);\n      }\n    })\n    const eventMappings = {\n      [eventTypes.RECONNECT_ATTEMPT]: this._onReconnectAttempt,\n      [eventTypes.RECONNECT_FAILED]: this._onReconnectFailed,\n      [eventTypes.CONNECT]: this._onConnect,\n      [eventTypes.DISCONNECT]: this._onDisconnect,\n      [eventTypes.ERROR]: this._onError,\n      [eventTypes.CONNECT_ERROR]: this._onConnectError,\n      [eventTypes.CONNECT_TIMEOUT]: this._onConnectTimeout,\n      [eventTypes.KEEP_ALIVE_RESPONSE]: this._onKeepAlive,\n      [eventTypes.LOGIN_RESPONSE]: this._onLoginResponse,\n      [eventTypes.EXTENSION_UPDATED]: this._reSync,\n      [eventTypes.QUEUES_UPDATED]: this._reSync,\n      [eventTypes.DIALERS_UPDATED]: this._reSync,\n      [eventTypes.LOGIN_STATUS]: () => {\n        if (!this.connected) {\n          this._onConnect()\n        }\n      }\n    };\n    const eventHandler = eventMappings[evt.name];\n    if (eventHandler && typeof eventHandler === 'function') {\n      eventHandler.call(this, evt.data);\n    }\n    if (this._handleLocalEvents) {\n      handleStoreEvents({\n        eventData: evt,\n        ...this.options\n      });\n    }\n  }\n\n  /**\n   * Initializes socket connection. Should be called before any other action\n   * @return {Promise<boolean>}\n   */\n  async init() {\n    if (this.connectionEstablished) {\n      return true;\n    }\n    if (this.socket) {\n      this.emit(eventTypes.CLOSE);\n    }\n    await this._getToken();\n    // if(window){\n    //   await this._getTabsSession();\n    // }\n    await this.login(this.options.loginType)\n    await this._getServers();\n    return true;\n  }\n\n  /**\n   * Sets the monitor code token\n   * @param token\n   */\n  setToken(token) {\n    this.options.token = token\n    this.disconnect()\n    return this.init()\n  }\n\n  /**\n   * Closes all existing connections\n   */\n  closeAllConnections() {\n    allConnections.forEach(connection => {\n      connection.close()\n      connection.disconnect()\n    })\n    allConnections = []\n    if (this.socket) {\n      this.socket.disconnect()\n      this.socket = null\n    }\n  }\n\n  /**\n   * Disconnects the socket instance from the servers\n   */\n  disconnect() {\n    this._listenersMap = new Map();\n    this.closeAllConnections()\n  }\n\n  /**\n   * Listens for new events\n   * @param {string} eventName (name of the event, * for all events)\n   * @param {function} callback (callback function when even with the specified name is received)\n   */\n  on(eventName, callback) {\n    this._listenersMap.set(eventName, callback);\n    this._checkInit()\n  }\n\n  /**\n   * Emits an event to the server\n   * @param {string} eventName (name of the event)\n   * @param {object} data (data for the event)\n   */\n\n  emit(eventName, data = {}) {\n    this._checkInit();\n    this.Logger.log(`EMIT -> ${eventName}`, data);\n    this.socket.emit(eventName, data);\n  }\n\n  /**\n   * Calls resync event to resync socket data\n   * @param cache\n   */\n  reSync(cache = true) {\n    this.emit(eventTypes.RESYNC, { cache })\n  }\n\n  async setMonitorUrl(url) {\n    const oldUrl = this.options.url\n    const oldStrategy = this.options.serverFetchStrategy\n    try {\n      if (!url) {\n        return\n      }\n      this.options.url = url\n      this.options.serverFetchStrategy = 'remote'\n    } catch (err) {\n      this._onError(err)\n      this.options.url = oldUrl\n      this.options.serverFetchStrategy = oldStrategy\n    }\n    await this.init()\n  }\n\n  _getToken() {\n    const { loginType } = this.options\n    this.token = this.options.token;\n    if (loginType === 'token') {\n      if (!this.token) {\n        throw new Error('Token login type expects the token option to be provided');\n      }\n    }\n  }\n  _getTabsSession(){\n      if (!window.sessionStorage.length) {\n        // Ask other tabs for session storage\n        localStorage.setItem('getSessionStorage', Date.now());\n      }\n      window.addEventListener('storage', (event) => {\n        //console.log('storage event', event);\n        if (event.key === 'getSessionStorage') {\n          // Some tab asked for the sessionStorage -> send it\n          localStorage.setItem('sessionStorage', JSON.stringify(window.sessionStorage));\n          localStorage.removeItem('sessionStorage');\n        } else if (event.key === 'sessionStorage' && !sessionStorage.length) {\n          // sessionStorage is empty -> fill it\n          var data = JSON.parse(event.newValue),\n                value;\n          for (let key in data) {\n            window.sessionStorage.setItem(key, data[key]);\n          }\n        }\n      })\n      return new Promise(resolve => setTimeout((resolve), 200))\n  }\n\n  /**\n   * Login (logs in based on the token/credentials provided)\n   * @param type (login type. Can be token/user/code/account)\n   * @return {Promise<void>}\n   */\n  login(type = 'token') {\n    // throttle login for 1 second\n    let payload = {\n      token: this.options.token,\n      email: this.options.email,\n      username: this.options.username,\n      password: this.options.password\n    }\n    let key = md5(JSON.stringify(payload))\n    const delay = 1000;\n    if (this._lastLoginTimestamp + delay > new Date().getTime()) {\n      return Promise.resolve()\n    }\n    this._lastLoginTimestamp = new Date().getTime()\n    return new Promise(async (resolve, reject) => {\n      // try{\n      //   if(window) {\n      //     let loginSession = window.sessionStorage.getItem(key);\n      //     if (loginSession) {\n      //       loginSession = JSON.parse(loginSession)\n      //       this.Logger.log('got data from session', loginSession);\n      //       await this._onLoginResponse(loginSession)\n      //       return resolve(loginSession);\n      //     }\n      //   }\n      //   }catch(err){\n      //     this.Logger.log('Error on getting session',err)\n      //   }\n      try {\n        let url = getExternalLoginUrl(this.options.loginUrl, type)\n        const res = await externalLogin(url,payload)\n        await this._onLoginResponse(res)\n        //if(window) window.sessionStorage.setItem(key, JSON.stringify(res));\n        return resolve(res)\n      } catch (err) {\n        this.servers = this.argumentOptions.servers || defaultServers;\n        return reject(err)\n      }\n    });\n  }\n}\n\nexport default EventsSDK;\n"],"names":["LOGIN_STATUS","LOGIN","LOGIN_USER","LOGIN_CODE","LOGIN_ACCOUNT","LOGIN_RESPONSE","QUEUE_EVENT","QUEUES_UPDATED","DIALERS_UPDATED","EXTENSION_EVENT","EXTENSION_UPDATED","ALL_EXTENSION_STATUS","CONNECT","CONNECT_ERROR","CONNECT_TIMEOUT","DISCONNECT","PONG","RECONNECT","RECONNECT_ATTEMPT","RESYNC","RECONNECTING","RECONNECT_ERROR","RECONNECT_FAILED","KEEP_ALIVE","KEEP_ALIVE_RESPONSE","CLOSE","ERROR","defaultServers","Logger","options","debug","message","data","toLog","JSON","stringify","now","Date","toUTCString","console","log","error","this","_log","_error","isObject","value","type","freeGlobal","global","Object","freeSelf","self","root","Function","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","getRawTag","isOwn","call","tag","unmasked","e","result","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","other","valueOf","replace","isBinary","test","slice","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","clearTimeout","cancel","flush","sdkEventReasons","NEWCALL","ANSWER","HANGUP","offlineEvents","eventTypes","isSocketOffline","event","name","includes","onNewEvent","eventData","store","extensionsModuleName","queuesModuleName","commit","dispatch","extensions","extension","reason","ivrid","ivruniqueid","extensionIndex","state","findIndex","userID","index","queues","queue","queueIndex","all","QueueID","callStatuses","CALLING","HOLD","ISRAEL_TIMEZONE_OFFSET","MINUTE","LOGOUT_STATUS","HOLD_STATUS","types","SET_EXTENSIONS","UPDATE_EXTENSIONS","SET_SERVER_TIME","SET_IS_SOCKET_OFFLINE","serverTime","serverDelta","serverOffset","offlineSocketTimestamp","mutations","splice","servertimeoffset","servertime","getTime","actions","setExtensions","updateExtension","isCallOnHold","status","callstatus","toLowerCase","answered","getters","isNaN","extensionsWithCalls","hideLoggedOutUsers","groupedExtensions","forEach","calls","length","filter","push","representativeStatus","extensionCountByStatus","el","namespaced","SET_QUEUES","UPDATE_QUEUES","setQueues","updateQueue","queueWithActiveCalls","Calls","allQueueCalls","allCalls","filterQueuesByIds","queueIds","Array","isArray","getServerWithHighestPriority","servers","chosenServer","maxPriority","Number","MAX_SAFE_INTEGER","server","Priority","isValidDate","date","n","Promise","t","r","s","XMLHttpRequest","o","u","i","a","ok","statusText","url","responseURL","text","resolve","responseText","json","then","parse","blob","Blob","response","clone","headers","keys","entries","get","has","l","open","method","onload","getAllResponseHeaders","onerror","withCredentials","credentials","setRequestHeader","send","body","Readable","Stream","BUFFER","TYPE","[object Object]","blobParts","buffers","size","element","buffer","Buffer","ArrayBuffer","isView","from","byteOffset","byteLength","String","concat","buf","ab","readable","_read","start","end","relativeStart","relativeEnd","span","slicedBuffer","FetchError","systemError","Error","code","errno","captureStackTrace","constructor","convert","defineProperties","enumerable","defineProperty","writable","configurable","create","require","INTERNALS","PassThrough","Body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBlob","isBuffer","disturbed","on","err","consumeBody","_this4","reject","alloc","stream","accum","accumBytes","abort","resTimeout","chunk","convertBody","ct","res","str","charset","exec","pop","obj","append","delete","getAll","set","sort","arrayBuffer","instance","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","writeToStream","dest","write","assign","_this2","_this3","mixIn","proto","getOwnPropertyNames","desc","getOwnPropertyDescriptor","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","map","key","MAP","Headers","init","rawHeaders","raw","headerNames","headerName","iterator","pairs","pair","join","callback","getHeaders","_pairs$i","createHeadersIterator","kind","k","values","INTERNAL","target","HeadersIteratorPrototype","setPrototypeOf","getPrototypeOf","_INTERNAL","done","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","createHeadersLenient","val","INTERNALS$1","STATUS_CODES","http","Response","opts","contentType","counter","redirected","INTERNALS$2","parse_url","Url","format_url","format","streamDestructionSupported","isRequest","input","isAbortSignal","signal","Request","parsedURL","href","toUpperCase","inputBody","redirect","follow","compress","agent","getNodeRequestOptions","request","protocol","hostname","contentLengthValue","totalBytes","AbortError","PassThrough$1","resolve_url","fetch","https","destroy","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","once","socket","isRedirect","statusCode","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","zlib","Z_SYNC_FLUSH","finishFlush","createGunzip","createBrotliDecompress","createInflate","createInflateRaw","m","default","process","require$$0","require$$1","async","externalLogin","email","password","token","username","pin","Data","Socket","getExternalLoginUrl","baseUrl","loginType","refreshToken","oldRefreshToken","WINDOW","window","JS_MD5_NO_WINDOW","WEB_WORKER","NODE_JS","JS_MD5_NO_NODE_JS","versions","node","COMMON_JS","JS_MD5_NO_COMMON_JS","module","exports","ARRAY_BUFFER","JS_MD5_NO_ARRAY_BUFFER","HEX_CHARS","split","EXTRA","SHIFT","OUTPUT_TYPES","BASE64_ENCODE_CHAR","blocks","buffer8","Uint8Array","Uint32Array","JS_MD5_NO_ARRAY_BUFFER_IS_VIEW","createOutputMethod","outputType","Md5","update","createMethod","nodeWrap","crypto","eval","nodeMethod","createHash","digest","sharedMemory","h0","h1","h2","h3","bytes","hBytes","finalized","hashed","first","notString","charCodeAt","lastByteIndex","hash","b","c","d","bc","da","hex","array","base64","v1","v2","v3","base64Str","md5","defaultOptions","fallbackServer","Domain","loginUrl","refreshTokenUrl","forceNew","reconnectionDelay","reconnectionDelayMax","maxReconnectAttempts","keepAliveTimeout","idleInterval","transports","upgrade","serverFetchStrategy","serverType","allConnections","listenersMap","Map","EventsSDK","argumentOptions","connected","connectionEstablished","_lastEventTimestamp","_initReconnectOptions","_listenersMap","_retryConnection","_connect","bind","reconnectOptions","_lastLoginTimestamp","_handleLocalEvents","_registerExtensionsModule","_registerQueueModule","cache","moduleName","_validateStoreModule","registerModule","extensionsModule","queuesModule","unregisterModule","retryCount","minReconnectionDelay","maxReconnectionDelay","_initReconnectDelays","minReconnectDelay","io","newDelay","_typeof","errorCode","_initSocketConnection","URL","URLList","Token","RefreshToken","_handleTokenExpiry","TokenExpiry","tokenExpiry","_onLoginResponse","packet","skipLogin","serverToConnect","_findCurrentServer","_findNextAvailableServer","_findMaxPriorityServer","_initSocketEvents","_initKeepAlive","login","domain","closeAllConnections","query","onevent","_onEvent","keepAliveInterval","clearInterval","setInterval","delta","getLastEventTimestamp","reSync","currentServerPriority","nextServerPriority","nextServer","maxPriorityServer","evt","_parsePacket","eventName","eventHandler","_onReconnectAttempt","_onReconnectFailed","_onConnect","_onDisconnect","_onError","_onConnectError","_onConnectTimeout","_onKeepAlive","_reSync","handleStoreEvents","_getToken","_getServers","disconnect","connection","close","_checkInit","oldUrl","oldStrategy","sessionStorage","localStorage","setItem","removeItem","newValue","payload","delay"],"mappings":"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"}